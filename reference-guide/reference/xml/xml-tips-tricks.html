<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7 at 2016-05-15 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160515" />
    <meta http-equiv="Content-Language" content="en" />
    <title>castor &#x2013; Castor XML - Tips & Tricks</title>
    <link rel="stylesheet" href="../../../css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="../../../css/site.css" />
    <link rel="stylesheet" href="../../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../../js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/castor-data-binding/castor">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://castor.org/" id="bannerLeft">
                <h2>Castor</h2>
                </a>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                                                                                                <img src="../../../images/castor.gif" />
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                              <li class="">
                    <a href="http://castor-data-binding.github.io/castor/" class="externalLink" title="Castor data binding">
        Castor data binding</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../.././" title="castor">
        castor</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Castor XML - Tips & Tricks</li>
        
              
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2016-05-15</li>
              <li id="projectVersion" class="pull-right">
                      <span class="divider">|</span>
                    Version: 1.4.1
        </li>
            
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://github.com/" class="externalLink" title="Github">
        Github</a>
      </li>

  
    <li class="pull-right">
                      <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Main</li>
                              
      <li>
  
                          <a href="../../../main/index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../../../main/features.html" title="Features">
          <span class="none"></span>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../../../main/download.html" title="Binary distributions">
          <span class="none"></span>
        Binary distributions</a>
            </li>
                
      <li>
  
                          <a href="../../../github-report.html" title="Recent changes">
          <span class="none"></span>
        Recent changes</a>
            </li>
                
      <li>
  
                          <a href="../../../main/maven-archetypes.html" title="Maven archetypes">
          <span class="none"></span>
        Maven archetypes</a>
            </li>
                
      <li>
  
                                        <a href="../../../rss/castor-announce.xml" target="_blank" title="RSS">RSS                                               <img class="imageLink" src="../../../images/rss.svg" alt="" width="16" height="16"/>
  </a>
                      </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../../../reference-guide/index.html" title="Reference guide">
          <span class="none"></span>
        Reference guide</a>
            </li>
                
      <li>
  
                          <a href="../../../documentation/reference.guide.html" title="Reference guide (older versions)">
          <span class="none"></span>
        Reference guide (older versions)</a>
            </li>
                
      <li>
  
                          <a href="../../../documentation/publications.html" title="Publications">
          <span class="none"></span>
        Publications</a>
            </li>
                
      <li>
  
                          <a href="../../../../wiki" title="Project Wiki">
          <span class="none"></span>
        Project Wiki</a>
            </li>
                              <li class="nav-header">Development/Support</li>
                              
      <li>
  
                          <a href="../../../support/mailing-lists.html" title="Mailing lists">
          <span class="none"></span>
        Mailing lists</a>
            </li>
                
      <li>
  
                          <a href="../../../support/contributing.html" title="Contributing">
          <span class="none"></span>
        Contributing</a>
            </li>
                
      <li>
  
                          <a href="../../../support/contributors.html" title="Contributors">
          <span class="none"></span>
        Contributors</a>
            </li>
                
      <li>
  
                          <a href="../../../support/support.html" title="Support">
          <span class="none"></span>
        Support</a>
            </li>
                
      <li>
  
                          <a href="../../../support/professional-services.html" title="Professional services">
          <span class="none"></span>
        Professional services</a>
            </li>
                              <li class="nav-header">Tools</li>
                              
      <li>
  
                          <a href="../../../tools/schema-generator.html" title="Schema generator">
          <span class="none"></span>
        Schema generator</a>
            </li>
                              <li class="nav-header">More</li>
                              
      <li>
  
                          <a href="../../../more/examples.html" title="Examples">
          <span class="none"></span>
        Examples</a>
            </li>
                              <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../../../about/licenses.html" title="License">
          <span class="none"></span>
        License</a>
            </li>
                
      <li>
  
                          <a href="../../../about/references.html" title="References">
          <span class="none"></span>
        References</a>
            </li>
                
      <li>
  
                          <a href="../../../about/project-name.html" title="Project name">
          <span class="none"></span>
        Project name</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="../../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                    
      <li>
  
                          <a href="../../../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="http://castor-data-binding.github.io/castor/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="https://travis-ci.org/castor-data-binding/castor" title="Travis-CI Build status (master branch)" class="builtBy">
        <img class="builtBy"  alt="Travis-CI Build status (master branch)" src="https://travis-ci.org/castor-data-binding/castor.svg?branch=master"    />
      </a>
                                                                                                    <a href="https://maven-badges.herokuapp.com/maven-central/org.codehaus.castor/castor/" title="Maven Central" class="builtBy">
        <img class="builtBy"  alt="Maven Central" src="https://maven-badges.herokuapp.com/maven-central/org.codehaus.castor/castor/badge.svg"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Castor XML - Tips &amp; Tricks</h1>
<div class="section">
<h2><a name="Logging_and_Tracing"></a>Logging and Tracing</h2>
<p>When developing using Castor, we recommend that you use the various <tt>setLogWriter</tt> methods to get detailed information and error messages.</p>
<p>Using a logger with <tt>org.exolab.castor.mapping.Mapping</tt> will provide detailed information about mapping decisions made by Castor and will show the SQL statements being used.</p>
<p>Using a logger with <tt>org.exolab.castor.jdo.JDO</tt> will provide trace messages that show when Castor is loading, storing, creating and deleting objects. All database operations will appear in the log; if an object is retrieved from the cache or is not modified, there will be no trace of load/store operations.</p>
<p>Using a logger with <tt>org.exolab.castor.xml.Unmarshaller</tt> will provide trace messages that show conflicts between the XML document and loaded objects.</p>
<p>A simple trace logger can be obtained from <tt>org.exolab.castor.util.Logger</tt>. This logger uses the standard output stream, but prefixes each line with a short message that indicates who generated it. It can also print the time and date of each message. Since logging is used for warning messages and simple tracing, Castor does not require a sophisticated logging mechanism.</p>
<p>Interested in integratating Castor&#x2019;s logging with Log4J? Then see <a class="externalLink" href="http://www.castor.org/jdo-faq.html#How-can-I-integrate-Castor&apos;s-logging-with-a-logging-infrastructure-using-Log4J?">this question</a> in the JDO FAQ.</p></div>
<div class="section">
<h2><a name="Indentation"></a>Indentation</h2>
<p>By default the marshaler writes XML documents without indentation. When developing using Castor or when debugging an application that uses Castor, it might be desireable to use indentation to make the XML documents human-readable. To turn indentation on, modify the Castor properties file, or create a new properties file in the classpath (named <tt>castor.properties</tt>) with the following content:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">org.exolab.castor.indent=true
</pre></div></div>
<p>Indentation inflates the size of the generated XML documents, and also consumes more CPU. It is recommended not to use indentation in a production environment.</p></div>
<div class="section">
<h2><a name="XML:Marshal_validation"></a>XML:Marshal validation</h2>
<p>It is possible to disable the validation in the marshaling framework by modifying the Castor properties file or by creating a new properties file in the classpath (named <tt>castor.properties</tt>) with the following content:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"> org.exolab.castor.marshalling.validation=false
</pre></div></div></div>
<div class="section">
<h2><a name="NoClassDefFoundError"></a>NoClassDefFoundError</h2>
<p>Check your CLASSPATH, check it often, there is no reason not to!</p></div>
<div class="section">
<h2><a name="Mapping:_auto-complete"></a>Mapping: auto-complete</h2>

<blockquote>
<p><b>Note</b></p>
<p>This only works with Castor-XML.</p>
</blockquote>
<p>To save time when writing your mappings, try using the <i>auto-complete</i> attribute of <i>class</i>. When using auto-complete, Castor will introspect your class and automatically fill in any missing fields.</p>
<p><b>Example:</b></p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;class name=&quot;com.acme.Foo&quot; auto-complete=&quot;true&quot;/&gt;          
</pre></div></div>
<p>This is also compatible with generated descriptor files. You can use a mapping file to override some of the behavior of a compiled descriptor by using auto-complete.</p>

<blockquote>
<p><b>Note</b></p>
<p>Be careful to make sure you use the exact field name as specified in the generated descriptor file in order to modify the behavior of the field descriptor! Otherwise, you&#x2019;ll probably end up with two fields being marshaled!</p>
</blockquote></div>
<div class="section">
<h2><a name="Create_method"></a>Create method</h2>
<p>Castor requires that classes have a public, no-argument constructor in order to provide the ability to marshal &amp; unmarshal objects of that type.</p>
<p>create-method is an optional attribute to the <tt>&lt;field&gt;</tt> mapping element that can be used to overcome this restriction in cases where you have an existing object model that consists of, say, singleton classes where public, no-argument constructors must not be present by definition.</p>
<p>Assume for example that a class &#x201c;<tt>A</tt>&#x201d; that you want to be able to unmarshal uses a singleton class as one of its properties. When attempting to unmarshal class &#x201c;<tt>A</tt>&#x201d;, you should get an exception because the singleton property has no public no-arg constructor. Assuming that a reference to the singleton can be obtained via a static getInstance() method, you can add a &#x201c;create method&#x201d; to class <tt>A</tt> like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">public MySingleton getSingletonProperty() {
    return MySingleton.getInstance();
}      
</pre></div></div>
<p>and in the mapping file for class <tt>A</tt>, you can define the singleton property like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"> &lt;field name=&quot;mySingletonProperty&quot;
       type=&quot;com.u2d.MySingleton&quot;
       create-method=&quot;getSingletonProperty&quot;&gt;
    &lt;bind-xml name=&quot;my-singleton-property&quot; node=&quot;element&quot; /&gt;
 &lt;/field&gt;
</pre></div></div>
<p>This illustrates how the create-method attribute is quite a useful mechanism for dealing with exceptional situations where you might want to take advantage of marshaling even when some classes do not have no-argument public constructors.</p>

<blockquote>
<p><b>Note</b></p>
<p>As of this writing, the specified create-method must exist as a method in the current class (i.e. the class being described by the current <tt>&lt;class&gt;</tt> element). In the future it may be possible to use external static factory methods.</p>
</blockquote></div>
<div class="section">
<h2><a name="MarshalListener_and_UnmarshalListener"></a>MarshalListener and UnmarshalListener</h2>
<p>Castor allows control on the object being marshaled or unmarshaled by a set of two listener interfaces: MarshalListener and UnmarshalListener.</p>
<p>The MarshalListener interface located in <tt>org.exolab.castor.xml</tt> listens to two different events that are intercepted by the following methods:</p>

<ul>
  
<li>
<p>preMarshal: this method is called before an object gets marshaled.</p></li>
  
<li>
<p>postMarshal: this method is called once an object has been marshaled.</p></li>
</ul>
<p>The UnmarshalListener located also in <tt>org.castor.xml</tt> listens to four different events that are intercepted by the following methods:</p>

<ul>
  
<li>
<p>initialized: this method is called once an object has been instantiated.</p></li>
  
<li>
<p>attributesProcessed: this method is called when the attributes have just been read and processed.</p></li>
  
<li>
<p>fieldAdded: this method is called when an object is added to a parent.</p></li>
  
<li>
<p>unmarshalled: this method is called when an object has been <b>fully</b> unmarshaled</p></li>
</ul>
<p><b>Note:</b> The <tt>UnmarshalListener</tt> had been part of <tt>org.exolab.castor.xml</tt> but as an extention of this interface had been required a new interface in <tt>org.castor.xml</tt> was introduced. Currently the <tt>org.exolab.castor.xml.UnmarshalListener</tt> interface can still be used but is deprecated.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2016.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
