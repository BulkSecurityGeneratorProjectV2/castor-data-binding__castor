<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7 at 2016-05-15 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160515" />
    <meta http-equiv="Content-Language" content="en" />
    <title>castor &#x2013; XML code generation</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/castor-data-binding/castor">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://castor.org/" id="bannerLeft">
                <h2>Castor</h2>
                </a>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                                                                                                <img src="../../images/castor.gif" />
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                              <li class="">
                    <a href="http://castor-data-binding.github.io/castor/" class="externalLink" title="Castor data binding">
        Castor data binding</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../.././" title="castor">
        castor</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">XML code generation</li>
        
              
                  <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2016-05-15</li>
              <li id="projectVersion" class="pull-right">
                      <span class="divider">|</span>
                    Version: 1.4.1
        </li>
            
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="http://github.com/" class="externalLink" title="Github">
        Github</a>
      </li>

  
    <li class="pull-right">
                      <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Main</li>
                              
      <li>
  
                          <a href="../../main/index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="../../main/features.html" title="Features">
          <span class="none"></span>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../../main/download.html" title="Binary distributions">
          <span class="none"></span>
        Binary distributions</a>
            </li>
                
      <li>
  
                          <a href="../../github-report.html" title="Recent changes">
          <span class="none"></span>
        Recent changes</a>
            </li>
                
      <li>
  
                          <a href="../../main/maven-archetypes.html" title="Maven archetypes">
          <span class="none"></span>
        Maven archetypes</a>
            </li>
                
      <li>
  
                                        <a href="../../rss/castor-announce.xml" target="_blank" title="RSS">RSS                                               <img class="imageLink" src="../../images/rss.svg" alt="" width="16" height="16"/>
  </a>
                      </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../../reference-guide/index.html" title="Reference guide">
          <span class="none"></span>
        Reference guide</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/reference.guide.html" title="Reference guide (older versions)">
          <span class="none"></span>
        Reference guide (older versions)</a>
            </li>
                
      <li>
  
                          <a href="../../documentation/publications.html" title="Publications">
          <span class="none"></span>
        Publications</a>
            </li>
                
      <li>
  
                          <a href="../../../wiki" title="Project Wiki">
          <span class="none"></span>
        Project Wiki</a>
            </li>
                              <li class="nav-header">Development/Support</li>
                              
      <li>
  
                          <a href="../../support/mailing-lists.html" title="Mailing lists">
          <span class="none"></span>
        Mailing lists</a>
            </li>
                
      <li>
  
                          <a href="../../support/contributing.html" title="Contributing">
          <span class="none"></span>
        Contributing</a>
            </li>
                
      <li>
  
                          <a href="../../support/contributors.html" title="Contributors">
          <span class="none"></span>
        Contributors</a>
            </li>
                
      <li>
  
                          <a href="../../support/support.html" title="Support">
          <span class="none"></span>
        Support</a>
            </li>
                
      <li>
  
                          <a href="../../support/professional-services.html" title="Professional services">
          <span class="none"></span>
        Professional services</a>
            </li>
                              <li class="nav-header">Tools</li>
                              
      <li>
  
                          <a href="../../tools/schema-generator.html" title="Schema generator">
          <span class="none"></span>
        Schema generator</a>
            </li>
                              <li class="nav-header">More</li>
                              
      <li>
  
                          <a href="../../more/examples.html" title="Examples">
          <span class="none"></span>
        Examples</a>
            </li>
                              <li class="nav-header">About</li>
                              
      <li>
  
                          <a href="../../about/licenses.html" title="License">
          <span class="none"></span>
        License</a>
            </li>
                
      <li>
  
                          <a href="../../about/references.html" title="References">
          <span class="none"></span>
        References</a>
            </li>
                
      <li>
  
                          <a href="../../about/project-name.html" title="Project name">
          <span class="none"></span>
        Project name</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                    
      <li>
  
                          <a href="../../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="http://castor-data-binding.github.io/castor/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="https://travis-ci.org/castor-data-binding/castor" title="Travis-CI Build status (master branch)" class="builtBy">
        <img class="builtBy"  alt="Travis-CI Build status (master branch)" src="https://travis-ci.org/castor-data-binding/castor.svg?branch=master"    />
      </a>
                                                                                                    <a href="https://maven-badges.herokuapp.com/maven-central/org.codehaus.castor/castor/" title="Maven Central" class="builtBy">
        <img class="builtBy"  alt="Maven Central" src="https://maven-badges.herokuapp.com/maven-central/org.codehaus.castor/castor/badge.svg"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>XML code generation</h1>
<h1>Introduction</h1>
<div class="section">
<h2><a name="News"></a>News</h2>
<div class="section">
<h3><a name="Source_generation__Java_field_naming_conventions"></a>Source generation &amp; Java field naming conventions</h3>
<p>Starting with <b>release 1.3.3</b>, the Castor source generator supports a new naming scheme for Java field names, which will be enabled by default. As such, Java field names as generated will follow more closely the standard Java property naming conventions. Should there be a need to keep using the old naming schema, please amend the following property in your custom <tt>castorbuilder.properties</tt> file:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">#
# Property specifying whether for Java field names the old naming conventions
# should be used.
#
# Possible values:
# - true
# - false (default)
# 
# 
# org.exolab.castor.builder.field-naming.old = false
# 
#
org.exolab.castor.builder.field-naming.old=true
            
</pre></div></div></div>
<div class="section">
<h3><a name="Source_generation__Java_5.0"></a>Source generation &amp; Java 5.0</h3>

<ol style="list-style-type: decimal">
  
<li>
<p>Since <b>release 1.0.2</b>, the Castor source generator supports the optional the generation of Java 5.0 compliant code.</p></li>
  
<li>
<p>With <b>release 1.3</b>, the XML code generator will generate Java 5.0 compliant code by default.</p></li>
</ol>
<p>With support for Java 5.0 enabled, the generated code will support the following Java 5.0-specific artifacts:</p>

<ul>
  
<li>
<p>Use of parameterized collections, e.g. <tt>ArrayList&lt;String&gt;</tt>.</p></li>
  
<li>
<p>Use of <tt>@Override</tt> annotations with the generated methods that require it.</p></li>
  
<li>
<p>Use of <tt>@SuppressWarnings</tt> with &#x201c;unused&#x201d; method parameters on the generated methods that needed it.</p></li>
  
<li>
<p>Added &#x201c;enum&#x201d; to the list of reserved keywords.</p></li>
</ul>
<p>To disable this feature (on by default), please amend the following property in your custom <tt>castorbuilder.properties</tt> file:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Specifies whether the sources generated should be source compatible with
# Java 1.4 or Java 5.0. Legal values are &quot;1.4&quot; and &quot;5.0&quot;.  When &quot;5.0&quot; is
# selected, generated source will use Java 5 features such as generics and
# annotations.
# Defaults to &quot;5.0&quot;.
#
org.exolab.castor.builder.javaVersion=5.0
        
</pre></div></div></div></div>
<div class="section">
<h2><a name="Introduction"></a>Introduction</h2>
<p>Castor&#x2019;s Source Code Generator creates a set of Java classes which represent an object model for an XML Schema (W3C XML Schema 1.0 Second Edition, Recommendation), as well as the necessary Class Descriptors used by the <a href="../xml-framework.html">marshaling framework</a> to obtain information about the generated classes.</p>

<blockquote>
<p><b>Note</b></p>
<p>The generated source files will need to be compiled. A later release may add an Ant taskdef to handle this automatically.</p>
</blockquote></div>
<div class="section">
<h2><a name="Invoking_the_XML_code_generator"></a>Invoking the XML code generator</h2>
<p>The XML code generator can be invoked in many ways, including by command line, via an Ant task and via Maven.</p></div>
<div class="section">
<h2><a name="XML_Schema"></a>XML Schema</h2>
<p>The input file for the source code generator is an XML schema[^1]footnote&gt;. The currently supported version is the <b>W3C XML Schema 1.0, Second Edition</b> [^2].</p>
<h1>Properties</h1></div>
<div class="section">
<h2><a name="Overview"></a>Overview</h2>
<p>Please find below a list of properties that can be configured through the builder configuration properties, as defined in either the default or a custom XML code generator configuration file. These properties allow you to control various advanced options of the XML source generator.</p>

<table border="0" class="table table-striped"><caption>&amp;lt;column&amp;gt; - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Option </th>
      
<th>Description </th>
      
<th>Values </th>
      
<th>Default </th>
      
<th>Since version</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>org.exolab.castor.builder.javaVersion </td>
      
<td>Compliance with Java version </td>
      
<td>1.4/5.0 </td>
      
<td>1.4 </td>
      
<td>1.0.2</td>
    </tr>
    
<tr class="a">
      
<td>org.exolab.castor.builder.forceJava4Enums </td>
      
<td>Forces the code generator to create &#x2018;old&#x2019; Java 1.4 enumeration classes even in Java 5 mode. </td>
      
<td><tt>true</tt>/<tt>false</tt> </td>
      
<td><tt>false</tt> </td>
      
<td>1.1.3</td>
    </tr>
    
<tr class="b">
      
<td>org.exolab.castor.builder.boundproperties </td>
      
<td>Generation of bound properties </td>
      
<td><tt>true</tt>/<tt>false</tt> </td>
      
<td><tt>false</tt> </td>
      
<td>0.8.9</td>
    </tr>
    
<tr class="a">
      
<td>org.exolab.castor.builder.javaclassmapping </td>
      
<td>Class generation mode </td>
      
<td><tt>element</tt>/<tt>type</tt> </td>
      
<td><tt>element</tt> </td>
      
<td>0.9.1</td>
    </tr>
    
<tr class="b">
      
<td>org.exolab.castor.builder.superclass </td>
      
<td>Global super class (for all classes generated) </td>
      
<td>Any valid class name </td>
      
<td> </td>
      
<td>0.8.9</td>
    </tr>
    
<tr class="a">
      
<td>org.exolab.castor.builder.nspackages </td>
      
<td>XML namespace to package name mapping </td>
      
<td>A series of mappings </td>
      
<td> </td>
      
<td>0.8.9</td>
    </tr>
    
<tr class="b">
      
<td>org.exolab.castor.builder.equalsmethod </td>
      
<td>Generation of <tt>equals</tt>/<tt>hashCode()</tt> method </td>
      
<td><tt>true</tt>/<tt>false</tt> </td>
      
<td><tt>false</tt> </td>
      
<td>0.9.1</td>
    </tr>
    
<tr class="a">
      
<td>org.exolab.castor.builder.useCycleBreaker </td>
      
<td>Use of cycle breaker code in generated <tt>equals</tt>/<tt>hashCode()</tt> method </td>
      
<td><tt>true</tt>/<tt>false</tt> </td>
      
<td><tt>true</tt> </td>
      
<td>1.3.2</td>
    </tr>
    
<tr class="b">
      
<td>org.exolab.castor.builder.primitivetowrapper </td>
      
<td>Generation of Object wrappers instead of primitives </td>
      
<td><tt>true</tt>/<tt>false</tt> </td>
      
<td><tt>false</tt> </td>
      
<td>0.9.4</td>
    </tr>
    
<tr class="a">
      
<td>org.exolab.castor.builder.automaticConflictResolution </td>
      
<td>Specifies whether <b>automatic class name conflict resolution</b> should be used or not </td>
      
<td><tt>true</tt>/<tt>false</tt> </td>
      
<td><tt>false</tt> </td>
      
<td><b>1.1.1</b></td>
    </tr>
    
<tr class="b">
      
<td>org.exolab.castor.builder.extraCollectionMethods </td>
      
<td>Specifies whether <b>extra</b> (additional) methods should be created for collection-style fields. Set this to true if you want your code to be more compatible with Castor JDO or other persistence frameworks. </td>
      
<td><tt>true</tt>/<tt>false</tt> </td>
      
<td><tt>false</tt> </td>
      
<td>0.9.1</td>
    </tr>
    
<tr class="a">
      
<td>org.exolab.castor.builder.jclassPrinterFactories </td>
      
<td>Enlists the available modes for (J)Class <i>printing</i> during XML code generation. </td>
      
<td><tt>org.exolab.castor.builder.printing.WriterJClassPrinterFactory</tt>/ <tt>org.exolab.castor.builder.printing.TemplateJClassPrinterFactory</tt> </td>
      
<td>n/a </td>
      
<td><b>1.2.1</b></td>
    </tr>
    
<tr class="b">
      
<td>org.exolab.castor.builder.extraDocumentationMethods </td>
      
<td>specifying whether extra members/methods for extracting XML schema documentation should be made available. </td>
      
<td><tt>true</tt>/<tt>false</tt> </td>
      
<td><tt>false</tt> </td>
      
<td><b>1.2</b></td>
    </tr>
  </tbody>
  
</table></div>
<div class="section">
<h2><a name="Customization_-_Lookup_mechanism"></a>Customization - Lookup mechanism</h2>
<p>By default, the Castor XML code generator will look for such a property file in the following places:</p>

<ol style="list-style-type: decimal">
  
<li>
<p>If no custom property file is specified, the Castor XML code generator will use the default builder configuration properties at <tt>org/exolab/castor/builder/castorbuilder.properties</tt> as shipped as part of the XML code generator JAR.</p></li>
  
<li>
<p>If a file named <tt>castorbuilder.properties</tt> is available on the CLASSPATH, the Castor XML code generator will use each of the defined property values to override the default value as defined in the default builder configuration properties. This file is commonly referred to as a <b>custom</b> builder configuration file.</p></li>
</ol></div>
<div class="section">
<h2><a name="Detailed_descriptions"></a>Detailed descriptions</h2>
<div class="section">
<h3><a name="Source_generation__Java_5.0"></a>Source generation &amp; Java 5.0</h3>
<p>As of <b>Castor 1.0.2</b>, the Castor source generator now supports the generation of Java 5.0 compliant code. The generated code - with the new feature enabled - will make use of the following Java 5.0-specific artifacts:</p>

<ul>
  
<li>
<p>Use of parameterized collections, e.g. ArrayList&lt;String&gt;.</p></li>
  
<li>
<p>Use of @Override annotations with the generated methods that require it.</p></li>
  
<li>
<p>Use of @SupressWarnings with &#x201c;unused&#x201d; method parameters on the generated methods that needed it.</p></li>
  
<li>
<p>Added &#x201c;enum&#x201d; to the list of reserved keywords.</p></li>
</ul>
<p>To enable this feature (off by default), please uncomment the following property in your custom <tt>castorbuilder.properties</tt> file:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># This property specifies whether the sources generated
# should comply with java 1.4 or 5.0; defaults to 1.4
org.exolab.castor.builder.javaVersion=5.0
</pre></div></div></div>
<div class="section">
<h3><a name="SimpleType_Enumerations"></a>SimpleType Enumerations</h3>
<p>In previous versions, castor only supported (un)marshalling of &#x201c;simple&#x201d; java5 enums, meaning enums where all facet values are valid java identifiers. In these cases, every enum constant name can be mapped directly to the xml value. See the following example:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;xs:simpleType name=&quot;AlphabeticalType&quot;&gt;
  &lt;xs:restriction base=&quot;xs:string&quot;&gt;
    &lt;xs:enumeration value=&quot;A&quot;/&gt;
    &lt;xs:enumeration value=&quot;B&quot;/&gt;
    &lt;xs:enumeration value=&quot;C&quot;/&gt;
  &lt;/xs:restriction&gt;
&lt;/xs:simpleType&gt;
</pre></div></div>

<div class="source">
<div class="source"><pre class="prettyprint linenums">public enum AlphabeticalType {
    A, B, C
}
</pre></div></div>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;root&gt;
  &lt;AlphabeticalType&gt;A&lt;/AlphabeticalType&gt;    
&lt;/root&gt;    
</pre></div></div>
<p>So if there is at least ONE facet that cannot be mapped directly to a valid java identifier, we need to extend the enum pattern. Examples for these cases are value=&#x201c;5&#x201d; or value=&#x201c;-s&#x201d;. Castor now introduces an extended pattern, similar to the jaxb2 enum handling. The actual value of the enumeration facet is stored in a private String property, the name of the enum constant is translated into a valid identifier. Additionally, some convenience methods are introduced, details about these methods are described after the following example:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;xs:simpleType name=&quot;CompositeType&quot;&gt;
  &lt;xs:restriction base=&quot;xs:string&quot;&gt;
    &lt;xs:enumeration value=&quot;5&quot;/&gt;
    &lt;xs:enumeration value=&quot;10&quot;/&gt;
  &lt;/xs:restriction&gt;
&lt;/xs:simpleType&gt;
</pre></div></div>

<div class="source">
<div class="source"><pre class="prettyprint linenums">public enum CompositeType {
    VALUE_5(&quot;5&quot;),
    VALUE_10(&quot;10&quot;);

    private final java.lang.String value;

    private CompositeType(final java.lang.String value) {
        this.value = value;
    }

    public static CompositeType fromValue(final java.lang.String value) {
        for (CompositeType c: CompositeType.values()) {
            if (c.value.equals(value)) {
                return c;
            }
        }
        throw new IllegalArgumentException(value);
    }

    public java.lang.String value() {
        return this.value;
    }
    
    public java.lang.String toString() {
        return this.value;
    }
}
</pre></div></div>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;root&gt;
  &lt;CompositeType&gt;5&lt;/CompositeType&gt;    
&lt;/root&gt;
</pre></div></div>
<div class="section">
<h4><a name="Unmarshalling_of_complex_enums"></a>Unmarshalling of complex enums</h4>
<p>Castor uses the static void fromValue(String value) method to retrieve the correct instance from the value in the XML input file. In our example, the input is &#x201c;5&#x201d;, fromValue returns <tt>CompositeType.VALUE_5</tt>.</p></div>
<div class="section">
<h4><a name="Marshalling_of_complex_enums"></a>Marshalling of complex enums</h4>
<p>Currently, we have to distinguish between enums with a class descriptor and the ones without. If you are using class descriptors, the EnumerationHandler uses the value() method to write the xml output.</p>
<p>If no descriptor classes are available, castor uses per default the toString() method to marshall the value. In this case, the override of the java.lang.Enum.toString() method is mandatory, because java.lang.Enum.toString() returns the NAME of the facet instead of the VALUE. So in our example, <tt>VALUE_10</tt> would be returned instead of &#x201c;10&#x201d;. To avoid this, castor expects an implementation of toString() that returns <tt>this.value</tt>.</p></div>
<div class="section">
<h4><a name="Source_Generation_of_complex_enums"></a>Source Generation of complex enums</h4>
<p>If the java version is set to &#x201c;5.0&#x201d;, the new default behavior of castor is to generate complex java5 enums for simpleType enumerations, as described above. In java 1.4 mode, nothing has changed and the old style enumeration classes using a HashMap are created.</p>
<p>Users, who are in java5 mode and still want to use the old style java 1.4 classes, can force this by setting the new <tt>org.exolab.castor.builder.forceJava4Enums</tt> property to true as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"> # Forces the code generator to create 'old' Java 1.4 enumeration classes instead 
 # of Java 5 enums for xs:simpleType enumerations, even in Java 5 mode.
 #
 # Possible values:
 # - false (default)
 # - true
org.exolab.castor.builder.forceJava4Enums=false
</pre></div></div></div></div>
<div class="section">
<h3><a name="Bound_Properties"></a>Bound Properties</h3>
<p>Bound properties are &#x201c;properties&#x201d; of a class, which when updated the class will send out a <tt>java.beans.PropertyChangeEvent</tt> to all registered <tt>java.beans.PropertyChangeListeners</tt>.</p>
<p>To enable bound properties, please add a property definition to your custom builder configuration file as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># To enable bound properties uncomment the following line. Please
# note that currently *all* fields will be treated as bound properties
# when enabled. This will change in the future when we introduce
# fine grained control over each class and it's properties.
#
org.exolab.castor.builder.boundproperties=true
</pre></div></div>
<p>When enabled, <b>all</b> properties will be treated as bound properties. For each class that is generated a <tt>setPropertyChangeListener</tt> method is created as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">/**
 * Registers a PropertyChangeListener with this class.
 * @param pcl The PropertyChangeListener to register.
 **/

public void addPropertyChangeListener (java.beans.PropertyChangeListener pcl)
{
   propertyChangeListeners.addElement(pcl);
}
</pre></div></div>
<p>Whenever a property of the class is changed, a <tt>java.beans.PropertyChangeEvent</tt> will be sent to all registered listeners. The property name, the old value and the new value will be set in the <b>java.beans.PropertyChangeEvent</b>.</p>

<blockquote>
<p><b>Note</b></p>
<p>To prevent unnecessary overhead, if the property is a collection, the old value will be null .</p>
</blockquote></div>
<div class="section">
<h3><a name="Class_CreationMapping"></a>Class Creation/Mapping</h3>
<p>The source generator can treat the XML Schema structures such as <tt>&lt;complexType&gt;</tt> and <tt>&lt;element&gt;</tt> in two main ways. The first, and current default method is called the &#x201c;element&#x201d; method. The other is called the &#x201c;type&#x201d; method.</p>

<table border="0" class="table table-striped"><caption>column - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Method </th>
      
<th>Explanation</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>&#x2018;element&#x2019; </td>
      
<td>The &#x201c;element&#x201d; method creates classes for all elements whose type is a &lt;complexType&gt;. Abstract classes are created for all top-level &lt;complexType&gt;s. Any elements whose type is a top-level type will have a new class create that extends the abstract class which was generated for that top-level complexType. Classes are not created for elements whose type is a &lt;simpleType&gt;.</td>
    </tr>
    
<tr class="a">
      
<td>&#x2018;type&#x2019; </td>
      
<td>The &#x201c;type&#x201d; method creates classes for all top-level &lt;complexType&gt;s, or elements that contain an &#x201c;anonymous&#x201d; (in-lined) &lt;complexType&gt;. Classes will not be generated for elements whose type is a top-level type.</td>
    </tr>
  </tbody>
  
</table>
<p>To change the &#x201c;method&#x201d; of class creation, please add the following property definition to your custom builder configuration file:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Java class mapping of &lt;xsd:element&gt;'s and &lt;xsd:complexType&gt;'s
#
org.exolab.castor.builder.javaclassmapping=type
</pre></div></div>
<p>Please note that setting this property will not affect class creation when the <tt>defaultBindingType</tt> is explicitely used in a binding file. In that case, the value set there will take precedence.</p></div>
<div class="section">
<h3><a name="Setting_a_super_class"></a>Setting a super class</h3>
<p>The source generator enables the user to set a super class to <b>all</b> the generated classes (of course, class descriptors are not affected by this option). Please note that, though the binding file, it is possible to define a super class for individual classes</p>
<p>To set the global super class, please add the following property definition to your custom builder configuration file:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># This property allows one to specify the super class of *all*
# generated classes
#
org.exolab.castor.builder.superclass=com.xyz.BaseObject
</pre></div></div></div>
<div class="section">
<h3><a name="Mapping_XML_namespaces_to_Java_packages"></a>Mapping XML namespaces to Java packages</h3>
<p>An XML Schema instance is identified by a namespace. For data-binding purposes, especially code generation it may be necessary to map namespaces to Java packages.</p>
<p>This is needed for imported schema in order for Castor to generate the correct imports during code generation for the primary schema.</p>
<p>To allow the mapping between namespaces and Java packages , edit the castorbuilder.properties file :</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># XML namespace mapping to Java packages
#
#org.exolab.castor.builder.nspackages=\
   http://www.xyz.com/schemas/project=com.xyz.schemas.project,\
   http://www.xyz.com/schemas/person=com.xyz.schemas.person
</pre></div></div></div>
<div class="section">
<h3><a name="Generate_equalshashCode_method"></a>Generate equals()/hashCode() method</h3>
<p>Since version: 0.9.1</p>
<p>The Source Generator can override the <tt>equals()</tt> and <tt>hashCode()</tt> method for the generated objects.</p>
<p>To have <tt>equals()</tt> and <tt>hashCode()</tt> methods generated, override the following property in your custom castorbuilder.properties file:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Set to true if you want to have an equals() and 
# hashCode() method generated for each generated class;
# false by default
org.exolab.castor.builder.equalsmethod=true
</pre></div></div></div>
<div class="section">
<h3><a name="Use_CycleBreaker_for_generation_of_equalshashcode_methods."></a>Use CycleBreaker for generation of equals()/hashcode() methods.</h3>
<p>Since version: 1.3.2</p>
<p>Specifies whether cycle breaker code should be added to generated methods <tt>equals()</tt> and <tt>hashcode()</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Property specifying whether cycle breaker code should be added
# to generated methods 'equals' and 'hashcode'. 
#
# Possible values:
# - true (default)
# - false
#
# &lt;pre&gt;
# org.exolab.castor.builder.useCycleBreaker
# &lt;/pre&gt;
org.exolab.castor.builder.useCycleBreaker=true
</pre></div></div></div>
<div class="section">
<h3><a name="Maps_java_primitive_types_to_wrapper_object"></a>Maps java primitive types to wrapper object</h3>
<p>Since version 0.9.4</p>
<p>It may be convenient to use java objects instead of primitives, the Source Generator provides a way to do it. Thus the following mapping can be used:</p>

<ul>
  
<li>boolean to java.lang.Boolean</li>
  
<li>byte to java.lang.Byte</li>
  
<li>double to java.lang.Double</li>
  
<li>float to java.lang.Float</li>
  
<li>int and integer to java.lang.Integer</li>
  
<li>long to java.lang.Long</li>
  
<li>short to java.lang.Short</li>
</ul>
<p>To enable this property, edit the castor <tt>builder.properties</tt> file:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Set to true if you want to use Object Wrappers instead
# of primitives (e.g Float instead of float).
# false by default.
#org.exolab.castor.builder.primitivetowrapper=false
</pre></div></div></div>
<div class="section">
<h3><a name="Automatic_class_name_conflict_resolution"></a>Automatic class name conflict resolution</h3>
<p>Since version 1.1.1</p>
<p>With this property enabled, the XML code generator will use a new automatic class name resolution mode that has special logic implemented to automatically resolve class name conflicts.</p>
<p>This new mode deals with various class name conflicts where previously a binding file had to be used to resolve these conflicts manually.</p>
<p>To enable this feature (turned off by default), please add the following property definitio to your custom <tt>castorbuilder.properties</tt> file:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Specifies whether automatic class name conflict resolution
# should be used or not; defaults to false.
#
org.exolab.castor.builder.automaticConflictResolution=true
</pre></div></div></div>
<div class="section">
<h3><a name="Extra_collection_methods"></a>Extra collection methods</h3>
<p>Specifies whether <b>extra</b> (additional) methods should be created for collection-style fields. Set this to <tt>true</tt> if you want your code to be more compatible with Castor JDO (or other persistence frameworks in general).</p>
<p>By setting this property to <tt>true</tt>, additional getter/setter methods for the field in question, such as get/set by reference and set as copy methods, will be added. In order to have these additional methods generated, please override the following code generator property in a custom <tt>castorbuilder.properties</tt> as shown:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Enables generation of extra methods for collection fields, such as get/set by
# reference and set as copy.  Extra methods are in addition to the usual
# collection get/set methods.  Set this to true if you want your code to be
# more compatible  with Castor JDO.
#
# Possible values:
# - false (default) 
# - true
org.exolab.castor.builder.extraCollectionMethods=true            
</pre></div></div></div>
<div class="section">
<h3><a name="Class_printing"></a>Class printing</h3>
<p>As of release 1.2, Castor supports the use of Velocity-based code templates for code generation. For the time being, Castor will support two modes for code generation, i.e. the new Velocity-based and an old legacy mode. <b>Default</b> will be the <i>legacy</i> mode; this will be changed with a later release of Castor.</p>
<p>In order to use the new Velocity-based code generation, please call the method setJClassPrinterType(String) on <tt>org.exolab.castor.builder.SourceGenerator</tt> with a value of <tt>velocity</tt>.</p>
<p>As we consider the code stable enough for a major release, we do encourage users to use the new Velocity-based mode and to provide us with (valuable) feedback.</p>
<p>Please note that we have changed the mechanics of changing the JClass printing type between releases 1.2 and 1.2.1.</p></div>
<div class="section">
<h3><a name="Extra_documentation_methods"></a>Extra documentation methods</h3>
<p>As of release 1.2, the Castor XML code generator - if configured as shown below - now supports generation of additional methods to allow programmatic access to &lt;xs:documentation&gt; elements for top-level type/element definitions as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">public java.lang.String getXmlSchemaDocumentation(final java.lang.String source);
public java.util.Map getXmlSchemaDocumentations();
</pre></div></div>
<p>In order to have these additional methods generated as shown above, please override the following code generator property in a custom <tt>castorbuilder.properties</tt> as shown:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Property specifying whether extra members/methods for extracting XML schema
# documentation should be made available; defaults to false
org.exolab.castor.builder.extraDocumentationMethods=true
</pre></div></div>
<h1>Custom bindings</h1>
<p>This section defines the Castor XML binding file and describes - based upon the use of examples - how to use it.</p>
<p>The default binding used to generate the Java Object Model from an XML schema may not meet your expectations. For instance, the default binding doesn&#x2019;t deal with naming collisions that can appear because XML Schema allows an element declaration and a complexType definition to use the same name. The source generator will attempt to create two Java classes with the same qualified name. However, the latter class generated will simply overwrite the first one.</p>
<p>Another example of where the default source generator binding may not meet your expectations is when you want to change the default datatype binding provided by Castor or when you want to add validation rules by implementing your own validator and passing it to the Source Generator.</p></div></div>
<div class="section">
<h2><a name="Binding_File"></a>Binding File</h2>
<p>The binding declaration is an XML-based language that allows the user to control and tweak details about source generation for the generated classes. The aim of this section is to provide an overview of the binding file and a definition of the several XML components used to define this binding file.</p>
<div class="section">
<h3><a name="abinding_element"></a>&lt;binding&gt; element</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;binding
    defaultBindingType = (element|type)&gt;
    (include*,
     package*,
     namingXML?,
     elementBinding*,
     attributeBinding,
     complexTypeBinding,
     groupBinding)
&lt;/binding&gt;
</pre></div></div>
<p>The binding element is the root element and contains the binding information.</p>
<p>| Name | Description | Default | Required? | defaultBindingType | Controls the class creation mode for details on the available modes. Please note that the mode specified in this attribute will override the binding type specified in the <tt>castorbuilder.properties</tt> file. | <tt>element</tt> | No [&lt;column&gt; - Definitions]</p></div>
<div class="section">
<h3><a name="ainclude_element"></a>&lt;include&gt; element</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;include
    URI = xsd:anyURI/&gt;
</pre></div></div>
<p>This element allows you to include a binding declaration defined in another file. This allows reuse of binding files defined for various XML schemas.</p>

<dl>
<dt><b>URI:</b></dt>
<dd>
<p>The URI of the binding file to include.</p></dd>
</dl></div>
<div class="section">
<h3><a name="apackage_element"></a>&lt;package&gt; element</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;package&gt;
    name = xsd:string
    (namespace|schemaLocation) = xsd:string&gt;
&lt;/package&gt;
</pre></div></div>

<table border="0" class="table table-striped"><caption>package - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Name </th>
      
<th>Description</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>name </td>
      
<td>A fully qualified java package name.</td>
    </tr>
    
<tr class="a">
      
<td>namespace </td>
      
<td>An XML namespace that will be mapped to the package name defined by the <i>name</i> element.</td>
    </tr>
    
<tr class="b">
      
<td>schemaLocation </td>
      
<td>A URL that locates the schema to be mapped to the package name defined by the <i>name</i> element.</td>
    </tr>
  </tbody>
  
</table>
<p>The <tt>targetNamespace</tt> attribute of an XML schema identifies the namespace in which the XML schema elements are defined. This language namespace is defined in the generated Java source as a package declaration. The <tt>&lt;package/&gt;</tt> element allows you to define the mapping between an XML namespace and a Java package.</p>
<p>Moreover, XML schema allows you to factor the definition of an XML schema identified by a unique namespace by including several XML schemas instances to build one XML schema using the <tt>&lt;xsd:include/&gt;</tt> element. Please make sure you understand the difference between <tt>&lt;xsd:include/&gt;</tt> and <tt>&lt;xsd:import/&gt;</tt>. <tt>&lt;xsd:include/&gt;</tt> # relies on the URI of the included XML schema. This element allows you to keep the structure hierarchy defined in XML schema in a single generated Java package. Thus the binding file allows you to define the mapping between a <tt>schemaLocation</tt> attribute and a Java package.</p></div>
<div class="section">
<h3><a name="anamingXML_element"></a>&lt;namingXML&gt; element</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;namingXML&gt;
   (elementName,complexTypeName,modelGroupName)
&lt;/namingXML&gt;

&lt;elementName|complexTypeName|modelGroupName&gt;
    (prefix?, suffix?) = xsd:string
&lt;/elementName|complexTypeName|modelGroupName&gt;
</pre></div></div>

<table border="0" class="table table-striped"><caption>namingXML - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Name </th>
      
<th>Description</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><i>prefix</i> </td>
      
<td>The prefix to add to the names of the generated classes.</td>
    </tr>
    
<tr class="a">
      
<td><i>suffix</i> </td>
      
<td>The suffix to append to the the names of the generated classes.</td>
    </tr>
  </tbody>
  
</table>
<p>One of the aims of the binding file is to avoid naming collisions. Indeed, XML schema allows &lt;element&gt;s and &lt;complexType&gt;s to share the same name, resulting in name collisions when generating sources. Defining a binding for each element and complexType that share the same name is not always a convenient solution (for instance the BPML XML schema and the UDDI v2.0 XML schema use the same names for top-level complexTypes and top-level elements).</p>
<p>The main aim of the <tt>&lt;namingXML/&gt;</tt> element is to define default prefices and suffices for the names of the classes generated for an &lt;element&gt;, a &lt;complexType&gt; or a model group definition.</p>

<blockquote>
<p><b>Note</b></p>
<p>It is not possible to control the names of the classes generated to represent nested model groups (all, choice, and sequence).</p>
</blockquote></div>
<div class="section">
<h3><a name="acomponentBinding_element"></a>&lt;componentBinding&gt; element</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;elementBinding|attributeBinding|complexTypeBinding|groupBinding
    name = xsd:string&gt;
   ((java-class|interface|member|contentMember),
     elementBinding*,
     attributeBinding*,
     complexTypeBinding*,
     groupBinding*)
&lt;/elementBinding|attributeBinding|complexTypeBinding|groupBinding&gt;
</pre></div></div>

<table border="0" class="table table-striped"><caption>componentBinding - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Name </th>
      
<th>Description</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>name </td>
      
<td>The name of the XML schema component for which we are defining a binding.</td>
    </tr>
  </tbody>
  
</table>
<p>These elements are the tenets of the binding file since they contain the binding definition for an XML schema element, attribute, complex type and model group definition. The first child element (<tt>&lt;java-class/&gt;</tt>, <tt>&lt;interface&gt;</tt>, <tt>&lt;member&gt;</tt> or <tt>&lt;contentMember/&gt;</tt>) will determine the type of binding one is defining. Please note that defining a <tt>&lt;java-class&gt;</tt> binding on an XML schema attribute will have absolutely no effect.</p>
<p>The binding file is written from an XML schema point of view; there are two distinct ways to define the XML schema component for which we are defining a binding.</p>

<ol style="list-style-type: decimal">
  
<li>
<p>(XPath-style) name</p></li>
  
<li>
<p>Embedded definitions</p></li>
</ol>
<div class="section">
<h4><a name="Name"></a>Name</h4>
<p>First we can define it through the <tt>name</tt> attribute.</p>
<p>The value of the name attribute uniquely identifies the XML schema component. It can refer to the top-level component using the NCName of that component or it can use a location language based on <a class="externalLink" href="http://www.w3.org/TR/xpath">XPath</a>. The grammar of that language can be defined by the following <a class="externalLink" href="http://en.wikipedia.org/wiki/Backus-Naur_form">BNF</a>:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">[1]Path         ::= '/'LocationPath('/'LocationPath)*
[2]LocationPath ::= (Complex|ModelGroup|Attribute|Element|Enumeration)
[3]Complex      ::= 'complexType:'(NCName)
[4]ModelGroup   ::= 'group:'NCName
[5]Attribute    ::= '@'NCName
[6]Element      ::= NCName
[7]Enumeration  ::= 'enumType':(NCName)
</pre></div></div>
<p>Please note that all values for the <tt>name</tt> attribute have to start with a <tt>'/'</tt>.</p></div>
<div class="section">
<h4><a name="Embedded_definitions"></a>Embedded definitions</h4>
<p>The second option to identify an XML schema component is to embed its binding definition inside its parent binding definition.</p>
<p>Considering below XML schema fragment &#x2026;</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;complexType name=&quot;fooType&quot;&gt;
    &lt;sequence&gt;
        &lt;element name=&quot;foo&quot; type=&quot;string&quot; /&gt;
    &lt;/sequence&gt;
&lt;/complexType&gt;
</pre></div></div>
<p>the following binding definitions are equivalent and identify the &lt;element&gt; <tt>foo</tt> defined in the top-level &lt;complexType&gt; <tt>fooType</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;elementBinding name=&quot;/complexType:fooType/foo&gt;
   &lt;member name=&quot;MyFoo&quot; handler=&quot;mypackage.myHandler&quot;/&gt;
&lt;/elementBinding&gt;

&lt;complexTypeBinding name=&quot;/fooType&quot;&gt;
   &lt;elementBinding name=&quot;/foo&gt;
      &lt;member name=&quot;MyFoo&quot; handler=&quot;mypackage.myHandler&quot;/&gt;
   &lt;/elementBinding&gt;
&lt;complexTypeBinding&gt;
</pre></div></div></div></div>
<div class="section">
<h3><a name="ajava-class"></a>&lt;java-class&gt;</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;java-class
    name? = xsd:string
    package? = xsd:string
    final? = xsd:boolean
    abstract? = xsd:boolean
    equals? = xsd:boolean
    bound? = xsd:boolean
    (implements*,extends?)
&lt;/java-class&gt;
</pre></div></div>
<p>This element defines all the options for the class to be generated, including common properties such as class name, package name, and so on.</p>

<dl>
<dt><b>name:</b></dt>
<dd>
<p>The name of the class that will be generated.</p></dd>
<dt><b>package:</b></dt>
<dd>
<p>The package of the class to be generated. if set, this option overrides the mapping defined in the <tt>&lt;package/&gt;</tt> element.</p></dd>
<dt><b>final:</b></dt>
<dd>
<p>If true, the generated class will be final.</p></dd>
<dt><b>abstract:</b></dt>
<dd>
<p>If true, the generated class will be abstract.</p></dd>
<dt><b>equals:</b></dt>
<dd>
<p>If true, the generated class will implement the <tt>equals()</tt> and <tt>hashCode()</tt> method.</p></dd>
<dt><b>bound:</b></dt>
<dd>
<p>If true, the generated class will implement bound properties, allowing property change notification.</p></dd>
</dl>
<p>For instance, the following binding definition instructs the source generator to generate a class <tt>CustomTest</tt> for a global element named &#x2018;test&#x2019;, replacing the default class name <tt>Test</tt> with <tt>CustomTest</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;elementBinding name=&quot;/test&quot;&gt;
   &lt;java-class name=&quot;CustomTest&quot; final=&quot;true&quot;/&gt;
&lt;/elementBinding&gt;
</pre></div></div>
<p>In addition to the properties listed above, it is possible to define that the class generated will extend a class given and/or implement one or more interfaces.</p>
<p>For instance, the following binding definition instructs the source generator to generate a class <tt>TestWithInterface</tt> that implements the interface <tt>org.castor.sample.SomeInterface</tt> in addition to <tt>java.io.Serializable</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;elementBinding name=&quot;/test&quot;&gt;
   &lt;java-class name=&quot;TestWithInterface&quot;&gt;
      &lt;implements&gt;org.castor.sample.SomeInterface&lt;/implements&gt;
   &lt;/java-class&gt;
&lt;/elementBinding&gt;
                 
</pre></div></div>
<p>The subsequent binding definition instructs the source generator to generate a class <tt>TestWithExtendsAndInterface</tt> that implements the interface <tt>org.castor.sample.SomeInterface</tt> in addition to <tt>java.io.Serializable</tt>, and extends from a (probably abstract) base class <tt>SomeAbstractBaseClass</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;elementBinding name=&quot;/test&quot;&gt;
   &lt;java-class name=&quot;TestWithExtendsAndInterface&quot;&gt;
      &lt;extends&gt;org.castor.sample.SomeAbstractBaseClass&lt;/extends&gt;
      &lt;implements&gt;org.castor.sample.SomeInterface&lt;/implements&gt;
   &lt;/java-class&gt;
&lt;/elementBinding&gt;                 
</pre></div></div>
<p>The generated class <tt>SomeAbstractBaseClass</tt> will have a class signature as shown below:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">...

public class TestWithExtendsAndInterface
   extends SomeAbstractBaseClass
   implements SomeInterface, java.io.Serializable {
   ...                 
</pre></div></div></div>
<div class="section">
<h3><a name="amember_element"></a>&lt;member&gt; element</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums"> &lt;member
  name? = xsd:string
  java-type? = xsd:string
  wrapper? = xsd:boolean
  handler? = xsd:string
  visibility? = (public|protected|private)
  collection? = (array|vector|arraylist|hashtable|collection|odmg|set|map|sortedset)
  validator? = xsd:string/&gt;
</pre></div></div>
<p>This element represents the binding for class member. It allows the definition of its name and java type as well as a custom implementation of FieldHandler to help the Marshaling framework in handling that member. Defining a validator is also possible. The names given for the validator and the fieldHandler must be fully qualified.</p>

<table border="0" class="table table-striped"><caption>member - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Name </th>
      
<th>Description</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>name </td>
      
<td>The name of the class member that will be generated.</td>
    </tr>
    
<tr class="a">
      
<td>java-type </td>
      
<td>Fully qualified name of the java type.</td>
    </tr>
    
<tr class="b">
      
<td>wrapper </td>
      
<td>If true, a wrapper object will be generated in case the Java type is a java primitive.</td>
    </tr>
    
<tr class="a">
      
<td>handler </td>
      
<td>Fully qualified name of the custom FieldHandler to use.</td>
    </tr>
    
<tr class="b">
      
<td>collection </td>
      
<td>If the schema component can occur more than once then this attribute allows specifying the collection to use to represent the component in Java.</td>
    </tr>
    
<tr class="a">
      
<td>validator </td>
      
<td>Fully qualified name of the FieldValidator to use.</td>
    </tr>
    
<tr class="b">
      
<td>visibility </td>
      
<td>A custom visibility of the content class member generated, with the default being <tt>public</tt>.</td>
    </tr>
  </tbody>
  
</table>
<p>For instance, the following binding definition:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;elementBinding name=&quot;/root/members&quot;&gt;
   &lt;member collection=&quot;set&quot;/&gt;
&lt;/elementBinding&gt;
</pre></div></div>
<p>instructs the source generator to generate &#x2013; within a class <tt>Root</tt> &#x2013; a Java member named <tt>members</tt> using the collection type <tt>java.util.Set</tt> instead of the default <tt>java.util.List</tt>:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">         public class Root {
         
            private java.util.Set members;
         
            ...
         
         }
</pre></div></div>
<p>The following (slightly amended) binding element:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;elementBinding name=&quot;/root/members&quot;&gt;
   &lt;member name=&quot;memberSet&quot; collection=&quot;set&quot;/&gt;
&lt;/elementBinding&gt;
</pre></div></div>
<p>instructs the source generator to generate &#x2013; again within a class <tt>Root</tt> &#x2013; a Java member named <tt>memberSet</tt> (of the same collection type as in the previous example), overriding the name of the member as specified in the XML schema:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">public class Root {

   private java.util.Set memberSet;

   ...

}
</pre></div></div></div>
<div class="section">
<h3><a name="acontentMember_element"></a>&lt;contentMember&gt; element</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">          &lt;contentMember
           name? = xsd:string
           visiblity? = (public|protected|private)
</pre></div></div>
<p>This element represents the binding for <i>content</i> class member generated as a result of a mixed mode declaration of a complex type definition. It allows the definition of its name and its visibility</p>

<dl>
<dt><b>name:</b></dt>
<dd>
<p>The name of the class member that will be generated, overriding the default name of <tt>_content</tt>.</p></dd>
<dt><b>visibility:</b></dt>
<dd>
<p>A custom visibility of the content class member generated, with the default being <tt>public</tt>.</p></dd>
</dl>
<p>For a complex type definition declared to be <i>mixed</i> such as follows &#x2026;</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;complexType name=&quot;RootType&quot; mixed=&quot;true&quot;&gt;
   &lt;sequence&gt;
      ...
   &gt;/sequence&gt;
&gt;/complexType&gt;
</pre></div></div>
<p>&#x2026; the following binding definition &#x2026;</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;elementBinding name=&quot;/complexType:RootType&quot;&gt;
   &lt;contentMember name=&quot;customContentMember&quot;/&gt;
&lt;/elementBinding&gt;
</pre></div></div>
<p>instructs the source generator to generate &#x2013; within a class <tt>RootType</tt> &#x2013; a Java member named <tt>customContentMember</tt> of type <tt>java.lang.String</tt>:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">public class RootType {

   private java.util.String customContentMember;

   ...
}
</pre></div></div></div>
<div class="section">
<h3><a name="aenumBinding_element"></a>&lt;enumBinding&gt; element</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;enumBinding&gt;
   (enumDef)
&lt;/enumBinding&gt;

&lt;enumDef&gt;
   (enumClassName = xsd:string, enumMember*)
&lt;/enumDef&gt;

&lt;enumMember&gt;
   (name = xsd:string, value = xsd:string)
&lt;/enumMember&gt;
</pre></div></div>
<p>The <tt>&lt;enumBinding&gt;</tt> element allows more control on the code generated for type-safe enumerations, which are used to represent an XML Schema <tt>&lt;simpleType&gt;</tt> enumeration.</p>
<p>For instance, given the following XML schema enumeration definition:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;xs:simpleType name=&quot;durationUnitType&quot;&gt;
  &lt;xs:restriction base='xs:string'&gt;
    &lt;xs:enumeration value='Y' /&gt;
    &lt;xs:enumeration value='M' /&gt;
    &lt;xs:enumeration value='D' /&gt;
    &lt;xs:enumeration value='h' /&gt;
    &lt;xs:enumeration value='m' /&gt;
    &lt;xs:enumeration value='s' /&gt;
  &lt;/xs:restriction&gt;
&lt;/simpleType&gt;
</pre></div></div>
<p>the Castor code generator would generate code where the default naming convention used during the generation would overwrite the first constant definition for value &#x2018;<tt>M</tt>&#x2019; with the one generated for value &#x2018;<tt>m</tt>&#x2019;.</p>
<p>The following binding definition defines &#x2013; through the means of an <tt>&lt;enumMember&gt;</tt> definition for the enumeration value &#x2018;<tt>M</tt>&#x2019; &#x2013; a special binding for this value:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;enumBinding name=&quot;/enumType:durationUnitType&quot;&gt;
  &lt;enum-def&gt;
    &lt;enumMember&gt;
      &lt;value&gt;M&lt;/value&gt;
      &lt;javaName&gt;CUSTOM_M&lt;/javaName&gt;
    &lt;/enumMember&gt;
  &lt;/enum-def&gt;
&lt;/enumBinding&gt;
</pre></div></div>
<p>and instructs the source generator to generate &#x2013; within a class <tt>DurationUnitType</tt> &#x2013; a constant definition named <tt>CUSTOM_M</tt> for the enumeration value <tt>M</tt>.</p></div>
<div class="section">
<h3><a name="Not_implemented_yet"></a>Not implemented yet</h3>
<div class="section">
<h4><a name="ajavadoc"></a>&lt;javadoc&gt;</h4>
<p>The <tt>&lt;javadoc&gt;</tt> element allows one to enter the necessary JavaDoc representing the generated classes or members.</p></div>
<div class="section">
<h4><a name="ainterface_element"></a>&lt;interface&gt; element</h4>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;interface&gt;
  name = xsd:string
&lt;/interface&gt;
</pre></div></div>

<ul>
  
<li>*<i>name:</i>*The name of the interface to generate.</li>
</ul>
<p>This element specifies the name of the interface to be generated for an XML schema component.</p></div></div></div>
<div class="section">
<h2><a name="Class_generation_conflicts"></a>Class generation conflicts</h2>
<p>As mentioned previously, you use a binding file for two main reasons:</p>

<ul>
  
<li>
<p>To customize the Java code generated</p></li>
  
<li>
<p>To avoid class generation conflicts.</p></li>
</ul>
<p>For the latter case, you&#x2019;ll (often) notice such collisions by looking at generated Java code that frequently does not compile. Whilst this is relatively easy for small(ish) XML schema(s), this task gets tedious for more elaborate XML schemas. To ease your life in the context of this &#x2018;collision detection&#x2019;, the Castor XML code generator provides you with a few advanced features. The following sections cover these features in detail.</p>
<div class="section">
<h3><a name="Collision_reporting"></a>Collision reporting</h3>
<p>During code generation, the Castor XML code generator will run into situations where a class (about to be generated, and as such about to be written to the file system) will overwrite an already existing class. This, for example, is the case if within one XML schema there&#x2019;s two (local) element definitions within separate complex type definitions with the same name. In such a case, Castor will emit warning messages that inform the user that a class will be overwritten.</p>
<p>As of release 1.1, the Castor XML code generator supports two <i>reporting modes</i> that allow different levels of control in the event of such collisions, <tt>warnViaConsoleDialog</tt> and <tt>informViaLog</tt> mode.</p>

<table border="0" class="table table-striped"><caption>column - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Mode </th>
      
<th>Description </th>
      
<th>Since</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><tt>warnViaConsoleDialog</tt> </td>
      
<td>Emits warning messages to <tt>stdout</tt> and ask the users whether to continue. </td>
      
<td>0.9</td>
    </tr>
    
<tr class="a">
      
<td><tt>informViaLog</tt> </td>
      
<td>Emits warning messages only via the standard logger. </td>
      
<td>1.1</td>
    </tr>
  </tbody>
  
</table>
<p>Please select the reporting mode of your choice according to your needs, the default being <tt>warnViaConsoleDialog</tt>. Please note that the <tt>informViaLog</tt> reporting mode should be the preferred choice when using the XML code generator in an automated environment.</p>
<p>In general, the warning messages produced are very useful in assisting you in your creation of the binding file, as shown in below example for the <tt>warnViaConsoleDialog</tt> mode:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"> Warning: A class name generation conflict has occurred between element
         '/Data/OrderReceipt/LineItem' and element '/Data/PurchaseOrder/LineItem'.
         Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
 Warning: A class name generation conflict has occurred between element
         '/Data/OrderReceipt/LineItem' and element '/Data/PurchaseOrder/LineItem'.
         Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
 Warning: A class name generation conflict has occurred between element
         '/Data/OrderReceipt/LineItem' and element '/Data/PurchaseOrder/LineItem'.
         Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
 Warning: A class name generation conflict has occurred between element
         'complexType:ReceiptLineItemType/Sku' and element 'complexType:LineItemType/Sku'.
         Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
 Warning: A class name generation conflict has occurred between element
         'complexType:ReceiptLineItemType/Sku' and element 'complexType:LineItemType/Sku'.
         Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
 Warning: A class name generation conflict has occurred between element
         'complexType:ReceiptLineItemType/Sku' and element 'complexType:LineItemType/Sku'.
         Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
</pre></div></div>
<div class="section">
<h4><a name="Reporting_mode_warnViaConsoleDialog"></a>Reporting mode &#x2018;warnViaConsoleDialog&#x2019;</h4>
<p>As already mentioned, this mode emits warning messages to <tt>stdout</tt>, and asks you whether you want to continue with the code generation or not. This allows for very fine grained control over the extent of the code generation.</p>
<p>Please note that there is several <i>setter</i> methods on the <tt>org.exolab.castor.builder.SourceGenerator</tt> that allow you to fine-tune various settings for this reporting mode. Genuinely, we believe that for automated code generation through either Ant or Maven, the new <tt>informViaLog</tt> is better suited for these needs.</p></div></div>
<div class="section">
<h3><a name="Automatic_collision_resolution"></a>Automatic collision resolution</h3>
<p>As of Castor 1.1.1, support has been added to the Castor XML code generator for a (nearly) automatic conflict resolution. To enable this new mode, please override the following property in your custom property file as shown below:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"> # Specifies whether automatic class name conflict resolution
 # should be used or not; defaults to false.
 #
 org.exolab.castor.builder.automaticConflictResolution=true
</pre></div></div>
<p>As a result of enabling automatic conflict resolution, Castor will try to resolve such name collisions automatically, using one of the following two strategies:</p>

<table border="0" class="table table-striped"><caption>column - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Name </th>
      
<th>Description </th>
      
<th>Since </th>
      
<th>Default</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><tt>xpath</tt> </td>
      
<td>Prepends an XPATH fragment to make the suggested Java name unique. </td>
      
<td>1.1.1 </td>
      
<td>Yes</td>
    </tr>
    
<tr class="a">
      
<td><tt>type</tt> </td>
      
<td>Appends type information to the suggested Java name. </td>
      
<td>1.1.1 </td>
      
<td>No</td>
    </tr>
  </tbody>
  
</table>
<div class="section">
<h4><a name="Selecting_the_strategy"></a>Selecting the strategy</h4>
<p>For selecting one of the two strategies during XML code generation, please see the documentation for the following code artifacts:</p>

<ul>
  
<li>setClassNameConflictResolver on <tt>org.exolab.castor.builder.SourceGenerator</tt></li>
  
<li><tt>org.exolab.castor.builder.SourceGeneratorMain&quot;</tt></li>
  
<li>Ant task definition</li>
  
<li>Maven plugin for Castor XML</li>
</ul>
<p>In order to explain the <i>modus operandi</i> of these two modes, please assume two complex type definitions <tt>AType</tt> and <tt>BType</tt> in an XML schema, with both of them defining a local element named <tt>c</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;xs:complexType name=&quot;AType&quot;&gt;
    &lt;xs:sequence&gt;
        &lt;xs:element name=&quot;c&quot; type=&quot;CType1&quot; /&gt;
    &lt;/xs:sequence&gt;
&lt;/xs:complexType&gt;            

&lt;xs:complexType name=&quot;BType&quot;&gt;
    &lt;xs:sequence&gt;
        &lt;xs:element name=&quot;c&quot; type=&quot;CType2&quot; /&gt;
    &lt;/xs:sequence&gt;
&lt;/xs:complexType&gt;
</pre></div></div>
<p>Without automatic collision resolution enabled, Castor will create identically named classes <tt>C.java</tt> for both members, and one will overwrite the other. Please note the different types for the two <tt>c</tt> element definitions, which requires two class files to be generated in order not to lose this information.</p></div>
<div class="section">
<h4><a name="aXPATH_strategy"></a>&#x2018;XPATH&#x2019; strategy</h4>
<p>This strategy will prepend an XPATH fragment to the default Java name as derived during code generation, the default name (frequently) being the name of the XML schema artifact, e.g. the element name of the complex type name. The XPATH fragment being prepended is minimal in the sense that the resulting rooted XPATH is unique for the XML schema artifact being processed.</p>
<p>With automatic collision resolution enabled and the strategy &#x2018;XPATH&#x2019; selected, Castor will create the following two classes, simply prepending the name of the complex type to the default element name:</p>

<ul>
  
<li>
<p>ATypeC.java</p></li>
  
<li>
<p>BTypeC.java</p></li>
</ul></div>
<div class="section">
<h4><a name="aTYPE_strategy"></a>&#x2018;TYPE&#x2019; strategy</h4>
<p>This strategy will append &#x2018;type&#x2019; information to the default Java name as derived during code generation, the default name (frequently) being the name of the XML schema artifact, e.g. the element name of the complex type name.</p>
<p>With automatic collision resolution enabled and the strategy &#x2018;TYPE&#x2019; selected, Castor will create the following two classes, simply appending the name of the complex type to the default element name (with a default &#x2018;<tt>By</tt>&#x2019; inserted):</p>

<ul>
  
<li>
<p>CByCType1.java</p></li>
  
<li>
<p>CByCType2.java</p></li>
</ul>
<p>To override the default &#x2018;<tt>By</tt>&#x2019; inserted between the default element name and the type information, please override the following property in your custom property file as shown below:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums"># Property specifying the 'string' used in type strategy to be inserted 
# between the actual element name and the type name (during automatic class name 
# conflict resolution); defaults to 'By'.
org.exolab.castor.builder.automaticConflictResolutionTypeSuffix=ByBy
</pre></div></div></div>
<div class="section">
<h4><a name="Conflicts_covered"></a>Conflicts covered</h4>
<p>The Castor XML code generator, with automatic collision resolution enabled, is capable of resolving the following collisions automatically:</p>

<ul>
  
<li>
<p>Name of local element definition same as name of a global element</p></li>
  
<li>
<p>Name of local element definition same as name of another local element definition.</p></li>
</ul>

<blockquote>
<p><b>Note</b></p>
<p>Please note that <i>collision resolution</i> for a local to local collision will only take place for the second local element definition encountered (and subsequent ones).</p>
</blockquote>
<h1>Invoking the XML code generator</h1></div></div></div>
<div class="section">
<h2><a name="Ant_task"></a>Ant task</h2>
<p>An alternative to using the command line as shown in the previous section, the Castor Source Generator Ant Task can be used to call the source generator for class generation. The only requirement is that the castor-&lt;version&gt;-codegen-antask.jar must additionally be on the CLASSPATH.</p>
<div class="section">
<h3><a name="Specifying_the_source_for_generation"></a>Specifying the source for generation</h3>
<p>As shown in the subsequent table, there&#x2019;s multiple ways of specifying the input for the Castor code generator. <b>At least one</b> input source has to be specified.</p>

<table border="0" class="table table-striped"><caption>column - Definitions</caption>
  <thead>
    
<tr class="a">
      
<th>Attribute </th>
      
<th>Description </th>
      
<th>Required </th>
      
<th>Since</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><b>file</b> </td>
      
<td>The XML schema, to be used as input for the source code generator. </td>
      
<td>No. </td>
    </tr>
    
<tr class="a">
      
<td><b>dir</b> </td>
      
<td>Sets a directory such that all XML schemas in this directory will have code generated for them. </td>
      
<td>No </td>
    </tr>
    
<tr class="b">
      
<td><b>schemaURL</b> </td>
      
<td>URL to an XML schema, to be used as input for the source code generator. </td>
      
<td>No. </td>
      
<td><b>1.2</b></td>
    </tr>
  </tbody>
  
</table>
<p>In addition, a nested <b>&lt;fileset&gt;</b> can be specified as the source of input. Please refer to the samples shown below.</p></div>
<div class="section">
<h3><a name="Parameters"></a>Parameters</h3>
<p>Please find below the complete list of parameters that can be set on the Castor source generator to fine-tune the execution behavior.</p>
<p>Attribute Description Required Since  &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;- &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;- &#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;- &#x2014;&#x2014;&#x2014;&#x2013;  <b>package</b> The default package to be used during source code generation. No; if not given, all classes will be placed in the root package. -  <b>todir</b> The destination directory to be used during source code generation. In this directory all generated Java classes will be placed. No -  <b>bindingfile</b> A Castor source generator binding file. No -  <b>lineseparator</b> Defines whether to use Unix- or Windows- or Mac-style line separators during source code generation. Possible values are: &#x2018;unix&#x2019;, &#x2018;win&#x2019; or &#x2018;mac&#x2019;. No; if not set, system property &#x2018;line.separator&#x2019; is used instead. -  <b>types</b> Defines what collection types to use (Java 1 vs. Java 2). Possible values: &#x2018;vector&#x2019;, &#x2018;arraylist&#x2019; (aka &#x2018;j2&#x2019;) or &#x2018;odmg&#x2019;. No; if not set, the default collection used will be Java 1 type -  <b>verbose</b> Whether to output any logging messages as emitted by the source generator No -  <b>warnings</b> Whether to suppress any warnings as otherwise emitted by the source generator No -  <b>nodesc</b> If used, instructs the source generator not to generate *Descriptor classes. No -  <b>generateMapping</b> If used, instructs the source generator to (additionally) generate a mapping file. No -  <b>nomarshal</b> If specified, instructs the source generator not to create (un)marshalling methods within the Java classes generated. No -  <b>caseInsensitive</b> If used, instructs the source generator to generate code for enumerated type lookup in a case insensitive manner. No -  <b>sax1</b> If used, instructs the source generator to generate SAX-1 compliant code. No -  <b>generateImportedSchemas</b> If used, instructs the source generator to generate code for imported schemas as well. No -  <b>nameConflictStrategy</b> If used, sets the name conflict strategy to use during XML code generation; possible values are &#x2018;<tt>warnViaConsoleDialog</tt>&#x2019; and &#x2018;<tt>informViaLog</tt>&#x2019;. No -  <b>properties</b> Location of file defining a set of properties to be used during source code generation. This overrides the default mechanisms of configuring the source generator through a <tt>castorbuilder.properties</tt> (that has to be placed on the CLASSPATH) No -  <b>automaticConflictStrategy</b> If used, sets the name conflict resolution strategy used during XML code generation; possible values are &#x2018;<tt>type</tt>&#x2019; and &#x2018;<tt>xpath</tt>&#x2019; (default being &#x2018;<tt>xpath</tt>&#x2019;). No -  <b>jClassPrinterType</b> Sets the mode for printing JClass instances during XML code generation; possible values are &#x2018;<tt>standard</tt>&#x2019; and &#x2018;<tt>velocity</tt>&#x2019; (default being &#x2018;<tt>standard</tt>&#x2019;). No <b>1.2.1</b>  <b>generateJdoDescriptors</b> If used, instructs the source generator to generate JDO class descriptors as well; default is false. No <b>1.3</b>  <b>resourceDestination</b> Sets the destination directory for (generated) resources, e.g. <tt>.castor.cdr</tt> files. No <b>1.3.1</b></p>
<p>: Ant task properties</p></div>
<div class="section">
<h3><a name="Examples"></a>Examples</h3>
<div class="section">
<h4><a name="Using_a_file"></a>Using a file</h4>
<p>Below is an example of how to use this task from within an Ant target definition named &#x2018;castor:gen:src&#x2019;:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;target name=&quot;castor:gen:src&quot; depends=&quot;init&quot;
         description=&quot;Generate Java source files from XSD.&quot;&gt;

    &lt;taskdef name=&quot;castor-srcgen&quot;
             classname=&quot;org.castor.anttask.CastorCodeGenTask&quot;
             classpathref=&quot;castor.class.path&quot; /&gt;
    &lt;mkdir dir=&quot;generated&quot; /&gt;
    &lt;castor-srcgen file=&quot;src/schema/sample.xsd&quot;
                   todir=&quot;generated-source&quot;
                   package=&quot;org.castor.example.schema&quot;
                   types=&quot;j2&quot;
                   warnings=&quot;true&quot; /&gt;
&lt;/target&gt;            
</pre></div></div></div>
<div class="section">
<h4><a name="Using_an_URL"></a>Using an URL</h4>
<p>Below is the same sample as above, this time using the <b>url</b> attribute as the source of input instead:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;target name=&quot;castor:gen:src&quot; depends=&quot;init&quot;
         description=&quot;Generate Java source files from XSD.&quot;&gt;

    &lt;taskdef name=&quot;castor-srcgen&quot;
             classname=&quot;org.castor.anttask.CastorCodeGenTask&quot;
             classpathref=&quot;castor.class.path&quot; /&gt;
    &lt;mkdir dir=&quot;generated&quot; /&gt;
    &lt;castor-srcgen schemaURL=&quot;http://some.domain/some/path/sample.xsd&quot;
                   todir=&quot;generated-source&quot;
                   package=&quot;org.castor.example.schema&quot;
                   types=&quot;j2&quot;
                   warnings=&quot;true&quot; /&gt;
&lt;/target&gt;            
</pre></div></div></div>
<div class="section">
<h4><a name="Using_a_nested_fileset"></a>Using a nested &lt;fileset&gt;</h4>
<p>Below is the same sample as above, this time using the <b>url</b> attribute as the source of input instead:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;target name=&quot;castor:gen:src&quot; depends=&quot;init&quot;
         description=&quot;Generate Java source files from XSD.&quot;&gt;

    &lt;taskdef name=&quot;castor-srcgen&quot;
             classname=&quot;org.castor.anttask.CastorCodeGenTask&quot;
             classpathref=&quot;castor.class.path&quot; /&gt;
    &lt;mkdir dir=&quot;generated&quot; /&gt;
    &lt;castor-srcgen todir=&quot;generated-source&quot;
                   package=&quot;org.castor.example.schema&quot;
                   types=&quot;j2&quot;
                   warnings=&quot;true&quot; &gt;
       &lt;fileset dir=&quot;${basedir}/src/schema&quot;&gt;
          &lt;include name=&quot;**/*.xsd&quot;/&gt;
       &lt;/fileset&gt;
    &lt;/castor-srcgen&gt;
&lt;/target&gt;            
</pre></div></div></div></div></div>
<div class="section">
<h2><a name="Maven_2_plugin"></a>Maven 2 plugin</h2>
<p>For those working with Maven 2 instead of Ant, the Maven 2 plugin for Castor can be used to integrate source code generation from XML schemas with the Castor XML code generator as part of the standard Maven build life-cycle. The following sections show how to configure the Maven 2 Castor plugin and hwo to instruct Maven 2 to generate sources from your XML schemas.</p>
<div class="section">
<h3><a name="Configuration"></a>Configuration</h3>
<p>To be able to start source code generation from XML schema from within Maven, you will have to configure the Maven 2 Castor plugin as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;plugin&gt;
   &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
   &lt;artifactId&gt;castor-maven-plugin&lt;/artifactId&gt;
   &lt;version&gt;2.0&lt;/version&gt;
&lt;/plugin&gt;
</pre></div></div>
<p>Above configuration will trigger source generation using the default values as explained at the <a class="externalLink" href="http://mojo.codehaus.org/castor-maven-plugin/howto.html">Castor plugin page</a>, assuming that the XML schema(s) are located at <tt>src/main/castor</tt>, and code will be saved at <tt>target/generated-sources/castor</tt>. When generating sources for multiple schemas at the same time, you can put namespace to package mappings into <tt>src/main/castor/castorbuilder.properties</tt>.</p>
<p>To e.g. change some of these default locations, please add a &lt;configuration&gt; section to the plugin configuration as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;plugin&gt;
   &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
   &lt;artifactId&gt;castor-maven-plugin&lt;/artifactId&gt;
   &lt;version&gt;2.0&lt;/version&gt;
   &lt;configuration&gt;
      &lt;schema&gt;src/main/resources/org/exolab/castor/builder/binding/binding.xsd&lt;/schema&gt;
      &lt;packaging&gt;org.exolab.castor.builder.binding&lt;/packaging&gt;
      &lt;properties&gt;src/main/resources/org/exolab/castor/builder/binding.generation.properties&lt;/properties&gt;
   &lt;/configuration&gt;
 &lt;/plugin&gt;      
</pre></div></div>
<p>Details on the available configuration properties can be found <a class="externalLink" href="http://mojo.codehaus.org/castor-maven-plugin/generate-mojo.html">here</a>.</p>
<p>By default, the Maven Castor plugin has been built and tested against a particular version of Castor. To switch to a newer version of Castor (not the plugin itself), please use a &lt;dependencies&gt; section as shown below to point the plugin to e.g. a newer version of Castor:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;plugin&gt;
   &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
   &lt;artifactId&gt;castor-maven-plugin&lt;/artifactId&gt;
   &lt;version&gt;2.0&lt;/version&gt;
   &lt;dependencies&gt;
     &lt;dependency&gt; 
       &lt;groupId&gt;org.codehaus.castor&lt;/groupId&gt;
       &lt;artifactId&gt;castor&lt;/artifactId&gt;
       &lt;version&gt;1.3.1-SNAPSHOT&lt;/version&gt;
     &lt;/dependency&gt;
   &lt;/dependencies&gt;
 &lt;/plugin&gt;      
</pre></div></div></div>
<div class="section">
<h3><a name="Integration_into_build_life-cycle"></a>Integration into build life-cycle</h3>
<p>To integrate source code generation from XML schema into your standard build life-cycle, you will have to add an &lt;executions&gt; section to your standard plugin configuration as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;plugin&gt;
   &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
   &lt;artifactId&gt;castor-maven-plugin&lt;/artifactId&gt;
   &lt;version&gt;2.0&lt;/version&gt;
   &lt;executions&gt;
      &lt;execution&gt;
         &lt;goals&gt;
            &lt;goal&gt;generate&lt;/goal&gt;
         &lt;/goals&gt;
      &lt;/execution&gt;
   &lt;/executions&gt;            
&lt;/plugin&gt;       
</pre></div></div></div>
<div class="section">
<h3><a name="Example"></a>Example</h3>
<p>Below command shows how to instruct Maven (manually) to generate Java sources from the XML schemas as configured above.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&gt; mvn castor:generate
</pre></div></div></div></div>
<div class="section">
<h2><a name="Command_line"></a>Command line</h2>
<div class="section">
<h3><a name="First_steps"></a>First steps</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">java org.exolab.castor.builder.SourceGeneratorMain -i foo-schema.xsd \
    -package com.xyz            
</pre></div></div>
<p>This will generate a set of source files from the the XML Schema <tt>foo-schema.xsd</tt> and place them in the package <tt>com.xyz</tt>.</p>
<p>To compile the generated classes, simply run <tt>javac</tt> or your favorite compiler:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">javac com/xyz/*.java
</pre></div></div>
<p>Created class will have marshal and unmarshal methods which are used to go back and forth between XML and an Object instance.</p></div>
<div class="section">
<h3><a name="Source_Generator_-_command_line_options"></a>Source Generator - command line options</h3>
<p>The source code generator has a number of different options which may be set. Some of these are done using the command line and others are done using a properties file located by default at <tt>org/exolab/castor/builder/castorbuilder.properties</tt>.</p>
<div class="section">
<h4><a name="Specifying_the_input_source"></a>Specifying the input source</h4>
<p>There&#x2019;s more than one way of specifying the input for the Castor code generator. <b>At least one</b> input source must be specified.</p>

<table border="0" class="table table-striped"><caption>Input sources</caption>
  <thead>
    
<tr class="a">
      
<th>Option </th>
      
<th>Args </th>
      
<th>Description </th>
      
<th>Version</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>i </td>
      
<td><i>filename</i> </td>
      
<td>The input XML Schema file </td>
    </tr>
    
<tr class="a">
      
<td>is </td>
      
<td><i>URL</i> </td>
      
<td>URL of an XML Schema </td>
      
<td><b>1.2 and newer</b></td>
    </tr>
  </tbody>
  
</table></div>
<div class="section">
<h4><a name="Other_command_Line_Options"></a>Other command Line Options</h4>

<table border="0" class="table table-striped"><caption>Other command line options</caption>
  <thead>
    
<tr class="a">
      
<th>Option </th>
      
<th>Arguments </th>
      
<th>Description </th>
      
<th>Optional?</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><tt>-package</tt> </td>
      
<td>package-name </td>
      
<td>The package for the generated source. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-dest</tt> </td>
      
<td>path </td>
      
<td>The destination directory in which to create the generated source </td>
      
<td>Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-line-separator</tt> </td>
      
<td>unix / mac / win </td>
      
<td>Sets the line separator style for the desired platform. This is useful if you are generating source on one platform, but will be compiling/modifying on another platform. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-types</tt> </td>
      
<td>type-factory </td>
      
<td>Sets which type factory to use. This is useful if you want JDK 1.2 collections instead of JDK 1.1 or if you want to pass in your own FieldInfoFactory. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-h</tt> </td>
      
<td> </td>
      
<td>Shows the help/usage information. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-f</tt> </td>
      
<td> </td>
      
<td>Forces the source generator to suppress all non-fatal errors, such as overwriting pre-existing files. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-nodesc</tt> </td>
      
<td> </td>
      
<td>Do not generate the class descriptors </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-gen-mapping</tt> </td>
      
<td> </td>
      
<td>(Additionally) Generate a mapping file. Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-nomarshall</tt> </td>
      
<td> </td>
      
<td>Do not generate the marshaling framework methods (marshal, unmarshal, validate) </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-testable</tt> </td>
      
<td> </td>
      
<td>Generate the extra methods used by the CTF (Castor Testing Framework) </td>
      
<td>Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-sax1</tt> </td>
      
<td> </td>
      
<td>Generate marshaling methods that use the SAX1 framework (default is false). </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-binding-file</tt> </td>
      
<td>&lt;&lt;binding file name&gt;&gt;. </td>
      
<td>Configures the use of a Binding File to allow finely-grained control of the generated classes </td>
      
<td>Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-generateImportedSchemas</tt> </td>
      
<td> </td>
      
<td>Generates sources for imported XML Schemas in addition to the schema provided on the command line (default is false). </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-case-insensitive</tt> </td>
      
<td> </td>
      
<td>The generated classes will use a case insensitive method for looking up enumerated type values. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-verbose</tt> </td>
      
<td> </td>
      
<td>Enables extra diagnostic output from the source generator </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-nameConflictStrategy</tt> </td>
      
<td>&lt;&lt;conflict strategy name&gt;&gt; </td>
      
<td>Sets the name conflict strategy to use during XML code generation </td>
      
<td>Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-fail</tt> </td>
      
<td> </td>
      
<td>Instructs the source generator to fail on the first error. When you are trying to figure out what is failing during source generation, this option will help. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-classPrinter</tt> </td>
      
<td>&lt;&lt;JClass printing mode&gt;&gt;. </td>
      
<td>Specifies the JClass printing mode to use during XML code generation; possible values are<tt>standard</tt> (default) and <tt>velocity</tt>; if no value is specified, the default mode is <tt>standard</tt>. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="b">
      
<td><tt>-gen-jdo-desc</tt> </td>
      
<td> </td>
      
<td>(Additionally) generate JDO class descriptors. </td>
      
<td>Optional</td>
    </tr>
    
<tr class="a">
      
<td><tt>-resourcesDestination</tt> </td>
      
<td>&lt;destination&gt; </td>
      
<td>An (optional) destination for (generated) resources </td>
      
<td>Optional</td>
    </tr>
  </tbody>
  
</table>
<div class="section">
<h5><a name="Collection_Types"></a>Collection Types</h5>
<p>The source code generator has the ability to use the following types of collections when generating source code, using the <tt>-type</tt> option:</p>

<table border="0" class="table table-striped"><caption>Collection types</caption>
  <thead>
    
<tr class="a">
      
<th>Option value </th>
      
<th>Type </th>
      
<th>Default</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td><tt>-types j1</tt> </td>
      
<td>Java 1.1 </td>
      
<td><tt>java.util.Vector</tt></td>
    </tr>
    
<tr class="a">
      
<td><tt>-type j2</tt> </td>
      
<td>Java 1.2 </td>
      
<td><tt>java.util.Collection</tt></td>
    </tr>
    
<tr class="b">
      
<td><tt>-types odmg</tt> </td>
      
<td>ODMG 3.0 </td>
      
<td><tt>odmg.DArray</tt></td>
    </tr>
  </tbody>
  
</table>
<p>The Java class name shown in above table indicates the default collection type that will be emitted during generation.</p>
<p>You can also write your own FieldInfoFactory to handle specific collection types. All you have to do is to pass in the fully qualified name of that FieldInfoFactory as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">-types com.personal.MyCoolFactory
</pre></div></div>

<blockquote>
<p><b>Tip</b></p>
<p>For additional information about the Source Generator and its options, you can download the Source Generator User Document (PDF) . Please note that the use of a binding file is not dicussed in that document.</p>
</blockquote>
<h1>XML schema support</h1>
<p>Castor XML supports the <a class="externalLink" href="http://www.w3.org/TR/xmlschema-1/">W3C XML Schema 1.0 Second Edition Recommendation document (10/28/2004)</a> The Schema Object Model (located in the package org.exolab.castor.xml.schema) provides an in-memory representation of a given XML schema whereas the XML code generator provides a binding between XML schema data types and structures into the corresponding ones in Java.</p>
<p>The Castor Schema Object Model can read (org.exolab.castor.xml.schema.reader) and write (org.exolab.castor.xml.schema.writer) an XML Schema as defined by the W3C recommandation. It allows you to create and manipulate an in-memory view of an XML Schema.</p>
<p>The Castor Schema Object Model supports the W3C XML Schema recommendation with no limitation. However the Source Generator does currently not offer a one to one mapping from an XML Schema component to a Java component for every XML Schema components; some limitations exist. The aim of the following sections is to provide a list of supported features in the Source Generator. Please keep in mind that the Castor Schema Object Model again can handle any XML Schema without limitations.</p>
<p>Some Schema types do not have a corresponding type in Java. Thus the Source Generator uses Castor implementation of these specific types (located in the org.exolab.castor.types package). For instance the <tt>duration</tt> type is implemented directly in Castor. Remember that the representation of XML Schema datatypes does not try to fit the W3C XML Schema specifications exactly. The aim is to map an XML Schema type to the Java type that is the best fit to the XML Schema type.</p>
<p>You will find next a list of the supported XML Schema data types and structures in the Source Code Generator. </p></div></div></div></div>
<div class="section">
<h2><a name="Supported_XML_Schema_Built-in_Datatypes"></a>Supported XML Schema Built-in Datatypes</h2>
<p>The following is a list of the supported datatypes with the corresponding facets and the Java mapping type.</p>
<div class="section">
<h3><a name="Primitive_Datatypes"></a>Primitive Datatypes</h3>

<table border="0" class="table table-striped"><caption>Supported primitive data types</caption>
  <thead>
    
<tr class="a">
      
<th>XML Schema Type </th>
      
<th>Supported Facets </th>
      
<th>Java mapping type</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>anyURI </td>
      
<td>enumeration </td>
      
<td><tt>java.lang.String</tt></td>
    </tr>
    
<tr class="a">
      
<td>base64Binary </td>
      
<td>&#xa0; </td>
      
<td><tt>byte[]</tt></td>
    </tr>
    
<tr class="b">
      
<td>boolean </td>
      
<td>pattern </td>
      
<td><tt>boolean</tt> or <tt>java.lang.Boolean</tt>[^3]</td>
    </tr>
    
<tr class="a">
      
<td>date </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace[^4] </td>
      
<td><tt>org.exolab.castor.types.Date</tt></td>
    </tr>
    
<tr class="b">
      
<td>dateTime </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>java.util.Date</tt></td>
    </tr>
    
<tr class="a">
      
<td>decimal </td>
      
<td>totalDigits, fractionDigits, pattern, whiteSpace, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>java.math.BigDecimal</tt></td>
    </tr>
    
<tr class="b">
      
<td>double </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>double</tt> or <tt>java.lang.Double</tt></td>
    </tr>
    
<tr class="a">
      
<td>duration </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>org.exolab.castor.types.Duration</tt></td>
    </tr>
    
<tr class="b">
      
<td>float </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>float</tt> or <tt>java.lang.Float</tt></td>
    </tr>
    
<tr class="a">
      
<td>gDay </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>org.exolab.castor.types.GDay</tt></td>
    </tr>
    
<tr class="b">
      
<td>gMonth </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>org.exolab.castor.types.GMonth</tt></td>
    </tr>
    
<tr class="a">
      
<td>gMonthDay </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>org.exolab.castor.types.GMonthDay</tt></td>
    </tr>
    
<tr class="b">
      
<td>gYear </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>org.exolab.castor.types.GYear</tt></td>
    </tr>
    
<tr class="a">
      
<td>gYearMonth </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>org.exolab.castor.types.GYearMonth</tt></td>
    </tr>
    
<tr class="b">
      
<td>hexBinary </td>
      
<td>&#xa0; </td>
      
<td><tt>byte[]</tt></td>
    </tr>
    
<tr class="a">
      
<td>QName </td>
      
<td>length, minLength, maxLength, pattern, enumeration </td>
      
<td><tt>java.lang.String</tt></td>
    </tr>
    
<tr class="b">
      
<td>string </td>
      
<td>length, minLength, maxLength, pattern, enumeration, whiteSpace </td>
      
<td><tt>java.lang.String</tt></td>
    </tr>
    
<tr class="a">
      
<td>time </td>
      
<td>enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, pattern, whitespace </td>
      
<td><tt>org.exolab.castor.types.Time</tt></td>
    </tr>
  </tbody>
  
</table></div>
<div class="section">
<h3><a name="Derived_Datatypes"></a>Derived Datatypes</h3>

<table border="0" class="table table-striped"><caption>Supported derived data types</caption>
  <thead>
    
<tr class="a">
      
<th>Type </th>
      
<th>Supported Facets </th>
      
<th>Java mapping type</th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>byte </td>
      
<td>totalDigits, fractionDigits[^5], pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace[^6] </td>
      
<td><tt>byte</tt>/<tt>java.lang.Byte</tt> [^7]</td>
    </tr>
    
<tr class="a">
      
<td>ENTITY </td>
      
<td> </td>
      
<td><b>Not implemented</b></td>
    </tr>
    
<tr class="b">
      
<td>ENTITIES </td>
      
<td> </td>
      
<td><b>Not implemented</b></td>
    </tr>
    
<tr class="a">
      
<td>ID </td>
      
<td>enumeration </td>
      
<td><tt>java.lang.String</tt></td>
    </tr>
    
<tr class="b">
      
<td>IDREF </td>
      
<td> </td>
      
<td><tt>java.lang.Object</tt></td>
    </tr>
    
<tr class="a">
      
<td>IDREFS </td>
      
<td> </td>
      
<td><tt>java.util.Vector</tt> of <tt>java.lang.Object</tt></td>
    </tr>
    
<tr class="b">
      
<td>int </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>int</tt>/<tt>java.lang.Integer</tt></td>
    </tr>
    
<tr class="a">
      
<td>integer </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>long</tt>/<tt>java.lang.Long</tt></td>
    </tr>
    
<tr class="b">
      
<td>language </td>
      
<td>length, minLength, maxLength, pattern, enumeration, whiteSpace </td>
      
<td>treated as a <tt>xsd:string</tt>[^8]</td>
    </tr>
    
<tr class="a">
      
<td>long </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>long</tt>/<tt>java.lang.Long</tt></td>
    </tr>
    
<tr class="b">
      
<td>Name </td>
      
<td> </td>
      
<td><b>Not implemented</b></td>
    </tr>
    
<tr class="a">
      
<td>NCName </td>
      
<td>enumeration </td>
      
<td><tt>java.lang.String</tt></td>
    </tr>
    
<tr class="b">
      
<td>negativeInteger </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>long</tt>/<tt>java.lang.Long</tt></td>
    </tr>
    
<tr class="a">
      
<td>NMTOKEN </td>
      
<td>enumeration, length, maxlength, minlength </td>
      
<td><tt>java.lang.String</tt></td>
    </tr>
    
<tr class="b">
      
<td>NMTOKENS </td>
      
<td> </td>
      
<td><tt>java.util.Vector</tt> of <tt>java.lang.String</tt></td>
    </tr>
    
<tr class="a">
      
<td>NOTATION </td>
      
<td> </td>
      
<td><b>Not implemented</b></td>
    </tr>
    
<tr class="b">
      
<td>nonNegativeInteger </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>long</tt>/<tt>java.lang.Long</tt></td>
    </tr>
    
<tr class="a">
      
<td>nonPositiveInteger </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>long</tt>/<tt>java.lang.Long</tt></td>
    </tr>
    
<tr class="b">
      
<td>normalizedString </td>
      
<td>enumeration, length, minLength, maxLength, pattern </td>
      
<td><tt>java.lang.String</tt></td>
    </tr>
    
<tr class="a">
      
<td>positiveInteger </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>long</tt>/<tt>java.lang.Long</tt></td>
    </tr>
    
<tr class="b">
      
<td>short </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>short</tt>/<tt>java.lang.Short</tt></td>
    </tr>
    
<tr class="a">
      
<td>token </td>
      
<td>length, minLength, maxLength, pattern, enumeration, whiteSpace </td>
      
<td>treated as a <tt>xsd:string</tt>,</td>
    </tr>
    
<tr class="b">
      
<td>unsignedByte </td>
      
<td>totalDigits, fractionDigits, maxExclusive, minExclusive, maxInclusive, minInclusive, pattern, whitespace </td>
      
<td><tt>short</tt>/<tt>java.lang.Short</tt></td>
    </tr>
    
<tr class="a">
      
<td>unsignedInt </td>
      
<td>totalDigits, fractionDigits, maxExclusive, minExclusive, maxInclusive, minInclusive, pattern, whitespace </td>
      
<td><tt>long</tt>/<tt>java.lang.Long</tt></td>
    </tr>
    
<tr class="b">
      
<td>unsignedLong </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>java.math.BigInteger</tt></td>
    </tr>
    
<tr class="a">
      
<td>unsignedShort </td>
      
<td>totalDigits, fractionDigits, pattern, enumeration, maxInclusive, maxExclusive, minInclusive, minExclusive, whitespace </td>
      
<td><tt>int</tt> or <tt>java.lang.Integer</tt></td>
    </tr>
  </tbody>
  
</table></div></div>
<div class="section">
<h2><a name="Supported_XML_Schema_Structures"></a>Supported XML Schema Structures</h2>
<p>Supporting XML schema structures is a constant work. The main structures are already supported with some limitations. The following will give you a rough list of the supported structures. For a more detailed support of XML Schema structure in the Source Generator or in the Schema Object Model, please refer to <a class="externalLink" href="http://www.castor.org/SourceGeneratorUser.pdf">Source Generator User Document (PDF)</a>.</p>
<p>Supported schema components:</p>

<ul>
  
<li>
<p>Attribute declaration (<tt>&lt;attribute&gt;</tt>)</p></li>
  
<li>
<p>Element declaration (<tt>&lt;element&gt;</tt>)</p></li>
  
<li>
<p>Complex type definition (<tt>&lt;complexType&gt;</tt>)</p></li>
  
<li>
<p>Attribute group definition (<tt>&lt;attributeGroup&gt;</tt>)</p></li>
  
<li>
<p>Model group definition (<tt>&lt;group&gt;</tt>)</p></li>
  
<li>
<p>Model group (<tt>&lt;all&gt;</tt>, <tt>&lt;choice&gt;</tt> and <tt>&lt;sequence&gt;</tt>)</p></li>
  
<li>
<p>Annotation (<tt>&lt;annotation&gt;</tt>)</p></li>
  
<li>
<p>Wildcard (<tt>&lt;any&gt;</tt>)</p></li>
  
<li>
<p>Simple type definition (<tt>&lt;simpleType&gt;</tt>)</p></li>
</ul>
<div class="section">
<h3><a name="Groups"></a>Groups</h3>
<p>Grouping support covers both <b>model group definitions</b> (<tt>&lt;group&gt;</tt>) and <b>model groups</b> (<tt>&lt;all&gt;</tt>, <tt>&lt;choice&gt;</tt> and <tt>&lt;sequence&gt;</tt>). In this section we will label as a &#x2018;nested group&#x2019; any model group whose first parent is another model group.</p>

<ul>
  
<li>
<p>For each top-level model group definition, a class is generated either when using the &#x2018;element&#x2019; mapping property or the &#x2018;type&#x2019; one.</p></li>
  
<li>
<p>If a group &#x2013; nested or not &#x2013; appears to have <tt>maxOccurs &gt; 1</tt> , then a class is generated to represent the items contained in the group.</p></li>
  
<li>
<p>For each nested group, a class is generated. The name of the generated class will follow this naming convention: <tt>Name,Compositor+,Counter?</tt> where</p>
  
<ul>
    
<li>&#x2018;Name&#x2019; is name of the top-level component (element, complexType or group).</li>
  </ul>
  
<ul>
    
<li>&#x2018;Compositor&#x2019; is the compositor of the nested group. For instance, if a &#x2018;choice&#x2019; is nested inside a sequence, the value of Compositor will be <tt>SequenceChoice</tt> (&#x2018;Sequence&#x2019;+&#x2018;Choice&#x2019;). Note: if the &#x2018;choice&#x2019; is inside a Model Group and that Model Group <b>parent</b> is a Model Group Definition or a complexType then the value of&#x2019;Compositor&#x2019; will be only &#x2018;Choice&#x2019;.</li>
  </ul>
  
<ul>
    
<li>&#x2018;Counter&#x2019; is a number that prevents naming collision.</li>
  </ul></li>
</ul></div>
<div class="section">
<h3><a name="Wildcard"></a>Wildcard</h3>
<p><tt>&lt;any&gt;</tt> is supported and will be mapped to an <tt>AnyNode</tt> instance. However, full namespace validation is not yet implemented, even though an <tt>AnyNode</tt> structure is fully namespace aware.</p>
<p><tt>&lt;anyAttribute&gt;</tt> is currently not supported. It is a work in progress.</p>
<h1>Examples</h1>
<p>In this section we illustrate the use of the XML code generator by discussing the classes generated from given XML schemas. The XML code generator is going to be used with the &#x201c;java class mapping&#x201d; property set to <i>element</i> (default value).</p></div></div>
<div class="section">
<h2><a name="The_invoice_XML_schema"></a>The invoice XML schema</h2>
<div class="section">
<h3><a name="The_schema_file"></a>The schema file</h3>
<p>The input file is the schema file given with the XML code generator example in the distribution of Castor (under /src/examples/SourceGenerator/invoice.xsd).</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;xsd:schema xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;
    targetNamespace=&quot;http://castor.exolab.org/Test/Invoice&quot;&gt;

    &lt;xsd:annotation&gt;
        &lt;xsd:documentation&gt;
            This is a test XML Schema for Castor XML.
        &lt;/xsd:documentation&gt;
    &lt;/xsd:annotation&gt;

    &lt;!--
        A simple representation of an invoice. This is simply an example
        and not meant to be an exact or even complete representation of an invoice.
    --&gt;
    &lt;xsd:element name=&quot;invoice&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A simple representation of an invoice
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;

        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;xsd:element name=&quot;ship-to&quot;&gt;
                    &lt;xsd:complexType&gt;
                        &lt;xsd:group ref=&quot;customer&quot; /&gt;
                    &lt;/xsd:complexType&gt;
                &lt;/xsd:element&gt;
                &lt;xsd:element ref=&quot;item&quot;
                    maxOccurs=&quot;unbounded&quot; minOccurs=&quot;1&quot; /&gt;
                &lt;xsd:element ref=&quot;shipping-method&quot; /&gt;
                &lt;xsd:element ref=&quot;shipping-date&quot; /&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;!-- Description of a customer --&gt;
    &lt;xsd:group name=&quot;customer&quot;&gt;
        &lt;xsd:sequence&gt;
            &lt;xsd:element name=&quot;name&quot; type=&quot;xsd:string&quot; /&gt;
            &lt;xsd:element ref=&quot;address&quot; /&gt;
            &lt;xsd:element name=&quot;phone&quot;
                type=&quot;TelephoneNumberType&quot; /&gt;
        &lt;/xsd:sequence&gt;
    &lt;/xsd:group&gt;

    &lt;!-- Description of an item --&gt;
    &lt;xsd:element name=&quot;item&quot;&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;xsd:element name=&quot;Quantity&quot;
                    type=&quot;xsd:integer&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot; /&gt;
                &lt;xsd:element name=&quot;Price&quot; type=&quot;PriceType&quot;
                    minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot; /&gt;
            &lt;/xsd:sequence&gt;
            &lt;xsd:attributeGroup ref=&quot;ItemAttributes&quot; /&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;!-- Shipping Method --&gt;
    &lt;xsd:element name=&quot;shipping-method&quot;&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;xsd:element name=&quot;carrier&quot;
                    type=&quot;xsd:string&quot; /&gt;
                &lt;xsd:element name=&quot;option&quot;
                    type=&quot;xsd:string&quot; /&gt;
                &lt;xsd:element name=&quot;estimated-delivery&quot;
                    type=&quot;xsd:duration&quot; /&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;!-- Shipping date --&gt;
    &lt;xsd:element name=&quot;shipping-date&quot;&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;xsd:element name=&quot;date&quot; type=&quot;xsd:date&quot; /&gt;
                &lt;xsd:element name=&quot;time&quot; type=&quot;xsd:time&quot; /&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;!-- A simple U.S. based Address structure --&gt;
    &lt;xsd:element name=&quot;address&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Represents a U.S. Address
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;

        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- street address 1 --&gt;
                &lt;xsd:element name=&quot;street1&quot;
                    type=&quot;xsd:string&quot; /&gt;
                &lt;!-- optional street address 2 --&gt;
                &lt;xsd:element name=&quot;street2&quot;
                    type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; /&gt;
                &lt;!-- city--&gt;
                &lt;xsd:element name=&quot;city&quot; type=&quot;xsd:string&quot; /&gt;
                &lt;!-- state code --&gt;
                &lt;xsd:element name=&quot;state&quot;
                    type=&quot;stateCodeType&quot; /&gt;
                &lt;!-- zip-code --&gt;
                &lt;xsd:element ref=&quot;zip-code&quot; /&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;!-- A U.S. Zip Code --&gt;
    &lt;xsd:element name=&quot;zip-code&quot;&gt;
        &lt;xsd:simpleType&gt;
            &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;
                &lt;xsd:pattern value=&quot;[0-9]{5}(-[0-9]{4})?&quot; /&gt;
            &lt;/xsd:restriction&gt;
        &lt;/xsd:simpleType&gt;
    &lt;/xsd:element&gt;

    &lt;!-- State Code
        obviously not a valid state code....but this is just
        an example and I don't feel like creating all the valid
        ones.
    --&gt;
    &lt;xsd:simpleType name=&quot;stateCodeType&quot;&gt;
        &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;
            &lt;xsd:pattern value=&quot;[A-Z]{2}&quot; /&gt;
        &lt;/xsd:restriction&gt;
    &lt;/xsd:simpleType&gt;

    &lt;!-- Telephone Number --&gt;
    &lt;xsd:simpleType name=&quot;TelephoneNumberType&quot;&gt;
        &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;
            &lt;xsd:length value=&quot;12&quot; /&gt;
            &lt;xsd:pattern value=&quot;[0-9]{3}-[0-9]{3}-[0-9]{4}&quot; /&gt;
        &lt;/xsd:restriction&gt;
    &lt;/xsd:simpleType&gt;

    &lt;!-- Cool price type --&gt;
    &lt;xsd:simpleType name=&quot;PriceType&quot;&gt;
        &lt;xsd:restriction base=&quot;xsd:decimal&quot;&gt;
            &lt;xsd:fractionDigits value=&quot;2&quot; /&gt;
            &lt;xsd:totalDigits value=&quot;5&quot; /&gt;
            &lt;xsd:minInclusive value=&quot;1&quot; /&gt;
            &lt;xsd:maxInclusive value=&quot;100&quot; /&gt;
        &lt;/xsd:restriction&gt;
    &lt;/xsd:simpleType&gt;

    &lt;!-- The attributes for an Item --&gt;
    &lt;xsd:attributeGroup name=&quot;ItemAttributes&quot;&gt;
        &lt;xsd:attribute name=&quot;Id&quot; type=&quot;xsd:ID&quot; minOccurs=&quot;1&quot;
            maxOccurs=&quot;1&quot; /&gt;
        &lt;xsd:attribute name=&quot;InStock&quot; type=&quot;xsd:boolean&quot;
            default=&quot;false&quot; /&gt;
        &lt;xsd:attribute name=&quot;Category&quot; type=&quot;xsd:string&quot;
            use=&quot;required&quot; /&gt;
    &lt;/xsd:attributeGroup&gt;
&lt;/xsd:schema&gt;
</pre></div></div>
<p>The structure of this schema is simple: it is composed of a top-level element which is a complexType with references to other elements inside. This schema represents a simple invoice: an invoice is a customer (<tt>customer</tt> top-level group), an article (<tt>item</tt> element), a shipping method (<tt>shipping-method</tt> element) and a shipping date (<tt>shipping-date</tt> element). Notice that the <tt>ship-to</tt> element uses a reference to an <tt>address</tt> element. This <tt>address</tt> element is a top-level element that contains a reference to a non-top-level element (the <tt>zip-cod</tt> element). At the end of the schema we have two simpleTypes for representing a telephone number and a price. The Source Generator is used with the <tt>element</tt> property set for class creation so a class is going to be generated for all top-level elements. No classes are going to be generated for complexTypes and simpleTypes since the simpleType is not an enumeration.</p>
<p>To summarize, we can expect 7 classes : <tt>Invoice</tt>, <tt>Customer</tt>, <tt>Address</tt>, <tt>Item</tt>, <tt>ShipTo</tt>, <tt>ShippingMethod</tt> and <tt>ShippingDate</tt> and the 7 corresponding class descriptors. Note that a class is generated for the top-level group <tt>customer</tt></p>
<p>To run the source generator and create the source from the <tt>invoice.xsd</tt> file in a package <tt>test</tt>, we just call in the command line:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">java -cp %CP% org.exolab.castor.builder.SourceGeneratorMain -i invoice.xsd -package test
</pre></div></div></div>
<div class="section">
<h3><a name="The_generated_code"></a>The generated code</h3>
<div class="section">
<h4><a name="The_Item.java_class"></a>The Item.java class</h4>
<p>To simplify this example we now focus on the <tt>item</tt> element.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;!-- Description of an item --&gt;
&lt;xsd:element name=&quot;item&quot;&gt;
  &lt;xsd:complexType&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element name=&quot;Quantity&quot; type=&quot;xsd:integer&quot;
                   minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot; /&gt;
      &lt;xsd:element name=&quot;Price&quot; type=&quot;PriceType&quot;
                   minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot; /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attributeGroup ref=&quot;ItemAttributes&quot; /&gt;
  &lt;/xsd:complexType&gt;
&lt;/xsd:element&gt;

&lt;!-- Cool price type --&gt;
&lt;xsd:simpleType name=&quot;PriceType&quot;&gt;
  &lt;xsd:restriction base=&quot;xsd:decimal&quot;&gt;
    &lt;xsd:fractionDigits value=&quot;2&quot; /&gt;
    &lt;xsd:totalDigits value=&quot;5&quot; /&gt;
    &lt;xsd:minInclusive value=&quot;1&quot; /&gt;
    &lt;xsd:maxInclusive value=&quot;100&quot; /&gt;
  &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;

&lt;!-- The attributes for an Item --&gt;
&lt;xsd:attributeGroup name=&quot;ItemAttributes&quot;&gt;
  &lt;xsd:attribute name=&quot;Id&quot; type=&quot;xsd:ID&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot; /&gt;
  &lt;xsd:attribute name=&quot;InStock&quot; type=&quot;xsd:boolean&quot; default=&quot;false&quot; /&gt;
  &lt;xsd:attribute name=&quot;Category&quot; type=&quot;xsd:string&quot; use=&quot;required&quot; /&gt;
&lt;/xsd:attributeGroup&gt;
</pre></div></div>
<p>To represent an <tt>Item</tt> object, we need to know its <tt>Id</tt>, the <tt>Quantity</tt> ordered and the <tt>Price</tt> for one item. So we can expect to find a least three private variables: a string for the <tt>Id</tt> element, an <tt>int</tt> for the <tt>quantity</tt> element (see the section on XML Schema support if you want to see the mapping between a W3C XML Schema type and a java type), but what type for the <tt>Price</tt> element?</p>
<p>While processing the <tt>Price</tt> element, Castor is going to process the type of <tt>Price</tt> i.e. the simpleType <tt>PriceType</tt> which base is <tt>decimal</tt>. Since derived types are automatically mapped to parent types and W3C XML Schema <tt>decimal</tt> type is mapped to a <tt>java.math.BigDecimal</tt>, the price element will be a <tt>java.math.BigDecimal</tt>. Another private variable is created for <tt>quantity</tt>: quantity is mapped to a primitive java type, so a boolean <tt>has_quantity</tt> is created for monitoring the state of the quantity variable. The rest of the code is the <i>getter/setter</i> methods and the Marshalling framework specific methods. Please find below the complete <tt>Item</tt> class (with Javadoc comments stripped off):</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">/** 
 * This class was automatically generated with 
 * Castor 1.0.4,
 * using an XML Schema.
 */

package test;

public class Item implements java.io.Serializable {

   //--------------------------/ 
   //- Class/Member Variables -/
   //--------------------------/

   private java.lang.String _id; 

   private int _quantity;

   /** 
    * keeps track of state for field: _quantity 
    */ 
   private boolean _has_quantity;

   private java.math.BigDecimal _price;

   //----------------/ 
   //- Constructors -/ 
   //----------------/

   public Item() { 
      super(); 
   } //-- test.Item()


   //-----------/ 
   //- Methods -/ 
   //-----------/

   public java.lang.String getId() { 
      return this._id; $
   } //-- java.lang.String getId()

   public java.math.BigDecimal getPrice() { 
      return this._price;
   } //-- java.math.BigDecimal getPrice()

   public int getQuantity() {
      return this._quantity;
   } //-- int getQuantity()

   public boolean hasQuantity() { 
      return this._has_quantity;
   } //-- boolean hasQuantity()

   public boolean isValid() {
      try { 
         validate();
      } catch (org.exolab.castor.xml.ValidationException vex) { 
         return false;
      }
      return true;
   } //-- boolean isValid()

   public void marshal(java.io.Writer out) 
   throws org.exolab.castor.xml.MarshalException,org.exolab.castor.xml.ValidationException {
      Marshaller.marshal(this, out);
   } //-- void marshal(java.io.Writer)

   public void marshal(org.xml.sax.DocumentHandler handler) 
   throws org.exolab.castor.xml.MarshalException, org.exolab.castor.xml.ValidationException {
      Marshaller.marshal(this, handler);
   } //-- void marshal(org.xml.sax.DocumentHandler)

   public void setId(java.lang.String _id) {
      this._id = _id;
   } //-- void setId(java.lang.String)

   public void setPrice(java.math.BigDecimal _price) {
      this._price = _price;
   } //-- void setPrice(java.math.BigDecimal)

   public void setQuantity(int _quantity) {
      this._quantity = _quantity;
      this._has_quantity = true;
   } //-- void setQuantity(int)

   public static test.Item unmarshal(java.io.Reader reader) 
   throws org.exolab.castor.xml.MarshalException,org.exolab.castor.xml.ValidationException {
      return (test.Item) Unmarshaller.unmarshal(test.Item.class, reader);
   } //-- test.Item unmarshal(java.io.Reader)

   public void validate() 
   throws org.exolab.castor.xml.ValidationException {
      org.exolab.castor.xml.Validator.validate(this, null);
   } //-- void validate()

}
</pre></div></div>
<p>The ItemDescriptor class is a bit more complex. This class is containing inner classes which are the XML field descriptors for the different components of an &#x2018;Item&#x2019; element i.e. id, quantity and price.</p></div>
<div class="section">
<h4><a name="The_PriceType.java_class"></a>The PriceType.java class</h4>
<p>TODO &#x2026;</p></div>
<div class="section">
<h4><a name="The_Invoice.java_class"></a>The Invoice.java class</h4>
<p>In this section, we focus on the &#x2018;invoice&#x2019; element as shown again below:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;xsd:element name=&quot;invoice&quot;&gt;
   &lt;xsd:complexType&gt;
      &lt;xsd:sequence&gt;
         &lt;xsd:element name=&quot;ship-to&quot;&gt;
            &lt;xsd:complexType&gt;
               &lt;xsd:group ref=&quot;customer&quot; /&gt;
            &lt;/xsd:complexType&gt;
         &lt;/xsd:element&gt;
         &lt;xsd:element ref=&quot;item&quot;    minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot; /&gt;
         &lt;xsd:element ref=&quot;shipping-method&quot; /&gt;
         &lt;xsd:element ref=&quot;shipping-date&quot; /&gt;
      &lt;/xsd:sequence&gt;
   &lt;/xsd:complexType&gt;
&lt;/xsd:element&gt;
</pre></div></div>
<p>Amongst other things, an <tt>&lt;invoice&gt;</tt> is made up of at least one, but potentially many <tt>&lt;item&gt;</tt> elements. The Castor XML code generator creates a Java collection named &#x2018;itemList&#x2019; for this unbounded element declaration, of type <tt>java.util.List</tt> if the scode generator is used with the &#x2018;<tt>arraylist</tt>&#x2019; field factory.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">    private java.util.List _itemList;
</pre></div></div>
<p>If the &#x2018;<tt>j1</tt>&#x2019; field factory is used, this will be replaced with &#x2026;</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">    private java.util.Vector _itemList;
</pre></div></div>
<p>The complete class as generated (with irrelevant code parts removed) in &#x2018;<tt>j2</tt>&#x2019; (aka &#x2018;<tt>arraylist</tt>&#x2019;) mode is shown below:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">public class Invoice implements java.io.Serializable {


    ...
    
    private java.util.List _itemList;
    
    ...

    public Invoice() 
     {
        super();
        this._itemList = new java.util.ArrayList();
    } //-- xml.c1677.invoice.generated.Invoice()

    ...

    public void addItem(xml.c1677.invoice.generated.Item vItem)
        throws java.lang.IndexOutOfBoundsException
    {
        this._itemList.add(vItem);
    } //-- void addItem(xml.c1677.invoice.generated.Item) 

    public void addItem(int index, xml.c1677.invoice.generated.Item vItem)
        throws java.lang.IndexOutOfBoundsException
    {
        this._itemList.add(index, vItem);
    } //-- void addItem(int, xml.c1677.invoice.generated.Item) 

    public java.util.Enumeration enumerateItem()
    {
        return java.util.Collections.enumeration(this._itemList);
    } //-- java.util.Enumeration enumerateItem() 

    public xml.c1677.invoice.generated.Item getItem(int index)
        throws java.lang.IndexOutOfBoundsException
    {
        // check bounds for index
        if (index &lt; 0 || index &gt;= this._itemList.size()) {
            throw new IndexOutOfBoundsException(&quot;getItem: Index value '&quot; + index 
               + &quot;' not in range [0..&quot; + (this._itemList.size() - 1) + &quot;]&quot;);
        }
        
        return (xml.c1677.invoice.generated.Item) _itemList.get(index);
    } //-- xml.c1677.invoice.generated.Item getItem(int) 

    public xml.c1677.invoice.generated.Item[] getItem()
    {
        int size = this._itemList.size();
        xml.c1677.invoice.generated.Item[] array = new xml.c1677.invoice.generated.Item[size];
        for (int index = 0; index &lt; size; index++){
            array[index] = (xml.c1677.invoice.generated.Item) _itemList.get(index);
        }
        
        return array;
    } //-- xml.c1677.invoice.generated.Item[] getItem() 

    public int getItemCount()
    {
        return this._itemList.size();
    } //-- int getItemCount() 

    public java.util.Iterator iterateItem()
    {
        return this._itemList.iterator();
    } //-- java.util.Iterator iterateItem() 

    public void removeAllItem()
    {
        this._itemList.clear();
    } //-- void removeAllItem() 

    public boolean removeItem(xml.c1677.invoice.generated.Item vItem)
    {
        boolean removed = _itemList.remove(vItem);
        return removed;
    } //-- boolean removeItem(xml.c1677.invoice.generated.Item) 

    public xml.c1677.invoice.generated.Item removeItemAt(int index)
    {
        Object obj = this._itemList.remove(index);
        return (xml.c1677.invoice.generated.Item) obj;
    } //-- xml.c1677.invoice.generated.Item removeItemAt(int) 

    public void setItem(int index, xml.c1677.invoice.generated.Item vItem)
        throws java.lang.IndexOutOfBoundsException
    {
        // check bounds for index
        if (index &lt; 0 || index &gt;= this._itemList.size()) {
            throw new IndexOutOfBoundsException(&quot;setItem: Index value '&quot; 
               + index + &quot;' not in range [0..&quot; + (this._itemList.size() - 1) + &quot;]&quot;);
        }
        
        this._itemList.set(index, vItem);
    } //-- void setItem(int, xml.c1677.invoice.generated.Item) 

    public void setItem(xml.c1677.invoice.generated.Item[] vItemArray)
    {
        //-- copy array
        _itemList.clear();
        
        for (int i = 0; i &lt; vItemArray.length; i++) {
                this._itemList.add(vItemArray[i]);
        }
    } //-- void setItem(xml.c1677.invoice.generated.Item) 

}
</pre></div></div></div></div></div>
<div class="section">
<h2><a name="Non-trivial_real_world_example"></a>Non-trivial real world example</h2>
<p>Two companies wish to trade with each other using a Supply Chain messaging system. This system sends and receives Purchase Orders and Order Receipt messages. After many months of discussion they have finally decided upon the structure of the Version 1.0 of their message XSD and both are presently developing solutions for it. One of the companies decides to use Java and Castor XML support for (un)marshaling and Castor&#x2019;s code generator to accelerate their development process.</p>
<div class="section">
<h3><a name="The_Supply_Chain_XSD"></a>The Supply Chain XSD</h3>

<div class="source">
<div class="source"><pre class="prettyprint linenums">            supplyChainV1.0.xsd
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;
           elementFormDefault=&quot;qualified&quot;
           attributeFormDefault=&quot;unqualified&quot;&gt;

    &lt;xs:element name=&quot;Data&quot;&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;
          This section contains the supply chain message data
        &lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
      &lt;xs:complexType&gt;
        &lt;xs:choice&gt;
          &lt;xs:element name=&quot;PurchaseOrder&quot;&gt;
            &lt;xs:complexType&gt;
              &lt;xs:sequence&gt;
                &lt;xs:element name=&quot;LineItem&quot; type=&quot;LineItemType&quot; maxOccurs=&quot;unbounded&quot;/&gt;
              &lt;/xs:sequence&gt;
              &lt;xs:attribute name=&quot;OrderNumber&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
            &lt;/xs:complexType&gt;
          &lt;/xs:element&gt;
          &lt;xs:element name=&quot;OrderReceipt&quot;&gt;
            &lt;xs:complexType&gt;
              &lt;xs:sequence&gt;
                &lt;xs:element name=&quot;LineItem&quot; type=&quot;ReceiptLineItemType&quot; maxOccurs=&quot;unbounded&quot;/&gt;
              &lt;/xs:sequence&gt;
              &lt;xs:attribute name=&quot;OrderNumber&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;
            &lt;/xs:complexType&gt;
          &lt;/xs:element&gt;
        &lt;/xs:choice&gt;
      &lt;/xs:complexType&gt;
    &lt;/xs:element&gt;

    &lt;xs:complexType name=&quot;SkuType&quot;&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;Contains Product Identifier&lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name=&quot;Number&quot; type=&quot;xs:integer&quot;/&gt;
        &lt;xs:element name=&quot;ID&quot; type=&quot;xs:string&quot;/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name=&quot;ReceiptSkuType&quot;&gt;
      &lt;xs:annotation&gt;
        &lt;xs:documentation&gt;Contains Product Identifier&lt;/xs:documentation&gt;
      &lt;/xs:annotation&gt;
      &lt;xs:complexContent&gt;
        &lt;xs:extension base=&quot;SkuType&quot;&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name=&quot;InternalID&quot; type=&quot;xs:string&quot;/&gt;
          &lt;/xs:sequence&gt;
        &lt;/xs:extension&gt;
      &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name=&quot;LineItemType&quot;&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name=&quot;Sku&quot; type=&quot;SkuType&quot;/&gt;
        &lt;xs:element name=&quot;Value&quot; type=&quot;xs:double&quot;/&gt;
        &lt;xs:element name=&quot;BillingInstructions&quot; type=&quot;xs:string&quot;/&gt;
        &lt;xs:element name=&quot;DeliveryDate&quot; type=&quot;xs:date&quot;/&gt;
        &lt;xs:element name=&quot;Number&quot; type=&quot;xs:integer&quot;/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name=&quot;ReceiptLineItemType&quot;&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name=&quot;Sku&quot; type=&quot;ReceiptSkuType&quot;/&gt;
        &lt;xs:element name=&quot;Value&quot; type=&quot;xs:double&quot;/&gt;
        &lt;xs:element name=&quot;PackingDescription&quot; type=&quot;xs:string&quot;/&gt;
        &lt;xs:element name=&quot;ShipDate&quot; type=&quot;xs:dateTime&quot;/&gt;
        &lt;xs:element name=&quot;Number&quot; type=&quot;xs:integer&quot;/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;
</pre></div></div></div>
<div class="section">
<h3><a name="Binding_file__IT_IS_REQUIRED"></a>Binding file? &#x2013; IT IS REQUIRED!</h3>
<p>If you run the Castor CodeGenerator on the above XSD you end up with the following set of classes. (You also get lots of warning messages with the present version.)</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">Data.java
DataDescriptor.java
LineItem.java
LineItemDescriptor.java
LineItemType.java
LineItemTypeDescriptor.java
OrderReceipt.java
OrderReceiptDescriptor.java
PurchaseOrder.java
PurchaseOrderDescriptor.java
ReceiptLineItemType.java
ReceiptLineItemTypeDescriptor.java
ReceiptSkuType.java
ReceiptSkuTypeDescriptor.java
Sku.java
SkuDescriptor.java
SkuType.java
SkuTypeDescriptor.java
</pre></div></div>
<p>The problem here is that there are two different elements with the same name in different locations in the XSD. This causes a Java code generation conflict. By default, Castor uses the element name as the name of the class. So the second class generated for the LineItem definition, which is different than the first, overwrites the first class generated.</p>
<p>A binding file is therefore necessary to help the Castor code generator differentiate between these generated classes and as such avoid such generation conflicts. That is, you can &#x2018;bind&#x2019; an element in the XML schema to a differently named class file that you want to generate. This keeps different elements separate and ensures that source is properly generated for each XML Schema object.</p>

<blockquote>
<p><b>Tip</b></p>
<p>The warning messages for Castor 0.99+ are very useful in assisting you in your creation of the binding file. For the example the warning messages for the example are:</p>
  
<div class="source">
<div class="source"><pre class="prettyprint linenums">    Warning: A class name generation conflict has occurred between element
            '/Data/OrderReceipt/LineItem' and element '/Data/PurchaseOrder/LineItem'.
            Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
    Warning: A class name generation conflict has occurred between element
            '/Data/OrderReceipt/LineItem' and element '/Data/PurchaseOrder/LineItem'.
            Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
    Warning: A class name generation conflict has occurred between element
            '/Data/OrderReceipt/LineItem' and element '/Data/PurchaseOrder/LineItem'.
            Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
    Warning: A class name generation conflict has occurred between element
            'complexType:ReceiptLineItemType/Sku' and element 'complexType:LineItemType/Sku'.
            Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
    Warning: A class name generation conflict has occurred between element
            'complexType:ReceiptLineItemType/Sku' and element 'complexType:LineItemType/Sku'.
            Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
    Warning: A class name generation conflict has occurred between element
            'complexType:ReceiptLineItemType/Sku' and element 'complexType:LineItemType/Sku'.
            Please use a Binding file to solve this problem.Continue anyway [not recommended] (y|n|?)y
</pre></div></div>
</blockquote>
<p>The following binding file definition will overcome the naming issues for the generated classes:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;binding xmlns=&quot;http://www.castor.org/SourceGenerator/Binding&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.castor.org/SourceGenerator/Binding C:\\Castor\\xsd\\binding.xsd&quot;
         defaultBinding=&quot;element&quot;&gt;

   &lt;elementBinding name=&quot;/Data/PurchaseOrder/LineItem&quot;&gt;
      &lt;java-class name=&quot;PurchaseOrderLineItem&quot;/&gt;
   &lt;/elementBinding&gt;

   &lt;elementBinding name=&quot;/Data/OrderReceipt/LineItem&quot;&gt;
      &lt;java-class name=&quot;OrderReceiptLineItem&quot;/&gt;
   &lt;/elementBinding&gt;

   &lt;elementBinding name=&quot;/complexType:ReceiptLineItemType/Sku&quot;&gt;
      &lt;java-class name=&quot;OrderReceiptSku&quot;/&gt;
   &lt;/elementBinding&gt;

   &lt;elementBinding name=&quot;/complexType:LineItemType/Sku&quot;&gt;
      &lt;java-class name=&quot;PurchaseOrderSku&quot;/&gt;
   &lt;/elementBinding&gt;

&lt;/binding&gt;
</pre></div></div>
<p>One thing to notice in the above <tt>binding.xml</tt> file is that the name path used is relative to the root of the XSD <b>and not</b> the root of the target XML. Also notice that the two complex types have the &#x201c;complexType:&#x201d; prefix to identify them followed by the name path relative to the root of the XSD.</p>
<p>The new list of generated classes is:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">Data.java
DataDescriptor.java
LineItem.java
LineItemDescriptor.java
LineItemType.java
LineItemTypeDescriptor.java
OrderReceipt.java
OrderReceiptDescriptor.java
OrderReceiptLineItem.java
OrderReceiptLineItemDescriptor.java
OrderReceiptSku.java
OrderReceiptSkuDescriptor.java
PurchaseOrder.java
PurchaseOrderDescriptor.java
PurchaseOrderLineItem.java
PurchaseOrderLineItemDescriptor.java
PurchaseOrderSku.java
PurchaseOrderSkuDescriptor.java
ReceiptLineItemType.java
ReceiptLineItemTypeDescriptor.java
ReceiptSkuType.java
ReceiptSkuTypeDescriptor.java
Sku.java
SkuDescriptor.java
SkuType.java
SkuTypeDescriptor.java
</pre></div></div>
<p>The developers can now use these generated classes with Castor to (un)marshal the supply chain messages sent by their business partner.</p></div></div>
<div class="section">
<h2><a name="Footnotes"></a>Footnotes</h2>
<p>[^1]: XML Schema is a <a class="externalLink" href="http://www.w3.org">W3C</a> Recommendation</p>
<p>[^2]: Castor supports the <a class="externalLink" href="http://www.w3.org/TR/XMLschema-1">XML Schema 1.0 Second  Edition</a></p>
<p>[^3]: For the various numerical types, the default behavior is to  generate primitive types. However, if the use of wrappers is enabled  by the following line in the <tt>castorbuilder.properties</tt> file:  <tt>org.exolab.castor.builder.primitivetowrapper=true</tt> then the  <tt>java.lang.*</tt> wrapper objects (as specified above) will be used  instead.</p>
<p>[^4]: For the date/time and numeric types, the only supported value for  whitespace is &#x201c;collapse&#x201d;.</p>
<p>[^5]: For the integral types, the only allowed value for fractionDigits  is 0.</p>
<p>[^6]: For the date/time and numeric types, the only supported value for  whitespace is &#x201c;collapse&#x201d;.</p>
<p>[^7]: For the various numerical types, the default behavior is to  generate primitive types. However, if the use of wrappers is enabled  by the following line in the <tt>castorbuilder.properties</tt> file:  <tt>org.exolab.castor.builder.primitivetowrapper=true</tt> then the  <tt>java.lang.*</tt> wrapper objects (as specified above) will be generated  instead.</p>
<p>[^8]: Currently, <tt>&lt;xsd:language&gt;</tt> and <tt>&lt;xsd:token&gt;</tt> are treated as if  they were <tt>&lt;xsd:string&gt;</tt>.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2016.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
