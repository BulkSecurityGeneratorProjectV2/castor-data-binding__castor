<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-12-02
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20151202" />
    <meta http-equiv="Content-Language" content="en" />
    <title>castor &#x2013; The Castor Testing Framework: Test Suite Execution and Test Creation</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://castor.org/" id="bannerLeft">
                <h2>Castor</h2>
                </a>
                      </div>
        <div class="pull-right">              <div id="bannerRight">
                                                                                                <img src="../images/castor.gif" />
                </div>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2015-12-02</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.4.0</li>
                      
                
                    
      
                                              
    <li class="pull-right">              <a href="http://github.com/" class="externalLink" title="Github">
        Github</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="http://maven.apache.org/" class="externalLink" title="Maven">
        Maven</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Main</li>
                                
      <li>
    
                          <a href="../main/index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="../main/features.html" title="Features">
          <i class="none"></i>
        Features</a>
            </li>
                  
      <li>
    
                          <a href="../main/download.html" title="Binary distributions">
          <i class="none"></i>
        Binary distributions</a>
            </li>
                  
      <li>
    
                          <a href="../github-report.html" title="Recent changes">
          <i class="none"></i>
        Recent changes</a>
            </li>
                  
      <li>
    
                          <a href="../main/maven-archetypes.html" title="Maven archetypes">
          <i class="none"></i>
        Maven archetypes</a>
            </li>
                  
      <li>
    
                                        <a href="../rss/castor-announce.xml" target="_blank" title="RSS">RSS                                               <img class="imageLink" src="../images/rss.svg" alt="" width="16" height="16"/>
  </a>
                      </li>
                              <li class="nav-header">Documentation</li>
                                
      <li>
    
                          <a href="../documentation/reference.guide.html" title="Reference guide">
          <i class="none"></i>
        Reference guide</a>
            </li>
                  
      <li>
    
                          <a href="../documentation/publications.html" title="Publications">
          <i class="none"></i>
        Publications</a>
            </li>
                  
      <li>
    
                          <a href="../../wiki" title="Project Wiki">
          <i class="none"></i>
        Project Wiki</a>
            </li>
                              <li class="nav-header">Development/Support</li>
                                
      <li>
    
                          <a href="../support/mailing-lists.html" title="Mailing lists">
          <i class="none"></i>
        Mailing lists</a>
            </li>
                  
      <li>
    
                          <a href="../support/contributing.html" title="Contributing">
          <i class="none"></i>
        Contributing</a>
            </li>
                  
      <li>
    
                          <a href="../support/contributors.html" title="Contributors">
          <i class="none"></i>
        Contributors</a>
            </li>
                  
      <li>
    
                          <a href="../support/support.html" title="Support">
          <i class="none"></i>
        Support</a>
            </li>
                  
      <li>
    
                          <a href="../support/professional-services.html" title="Professional services">
          <i class="none"></i>
        Professional services</a>
            </li>
                              <li class="nav-header">Tools</li>
                                
      <li>
    
                          <a href="../tools/schema-generator.html" title="Schema generator">
          <i class="none"></i>
        Schema generator</a>
            </li>
                              <li class="nav-header">More</li>
                                
      <li>
    
                          <a href="../more/examples.html" title="Examples">
          <i class="none"></i>
        Examples</a>
            </li>
                              <li class="nav-header">About</li>
                                
      <li>
    
                          <a href="../about/licenses.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="../about/references.html" title="References">
          <i class="none"></i>
        References</a>
            </li>
                  
      <li>
    
                          <a href="../about/project-name.html" title="Project name">
          <i class="none"></i>
        Project name</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                            
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>The Castor Testing Framework: Test Suite Execution and Test Creation</h1>
<p>Describes how to create test cases for and and how to use the Castor Testing Framework.</p>
<p>This document describes the Castor Testing Framework, how to execute it, what test suites exist, and how, when, and where to add a test.</p>
<div class="section">
<h2><a name="Abstract"></a>Abstract</h2>
<p>Test Automation is often seen as very useful but tedious task. However the limited number of test templates for Castor makes it easy to implement. The aim of this document is to describe the Castor Testing Framework by giving an overview of its functionalities and by providing detailed example test cases.</p></div>
<div class="section">
<h2><a name="Introduction"></a>Introduction</h2>
<p>One of the main processes in the life cycle of software is the &#x2018;validation and verification&#x2019; process. It is a central process that checks that the requisite functions exist and that there are no faults. It is also known as the unpopular &#x2018;testing&#x2019; process. The reliability and integrity of a software project are based on tests. Being &#x2018;open-source&#x2019; does not mean that one can avoiding writing tests.</p>
<p>However, software testing in general consumes 30 to 70 percent of software development resources, does not find all the faults, and can be just as much work as writing the original code itself. Moreover when involved in an open-source project which includes several developers and contributors, a developer needs to write tests that can be understood by the other developers without requiring a great investment of time. Ideally, these tests will highlight and test a specific feature, so if they fail the current developers can quickly understand what is broken, where the problem was introduced, and how to fix it.</p>
<p>One solution is to choose to automated tests: as described in <a class="externalLink" href="http://www.io.com/~wazmo/papers/seven_steps.html">Seven Steps to Automation Steps</a> by Bret Pettichord, there are several reasons to choose to automate tests:</p>

<ul>
  
<li>Allow testing to happen more frequently,</li>
  
<li>Improve test coverage,</li>
  
<li>Ensure consistency, and</li>
  
<li>Improve the reliability of testing,</li>
</ul>
<p>For all of these reasons, we have chosen to give to Castor an automated Testing Framework called the &#x201c;Castor Testing Framework&#x201d; (and referered to as the CTF). This framework is built with <a class="externalLink" href="http://www.junit.org">JUnit</a>and will help Castor developers. It also helps users in several ways by:</p>

<ul>
  
<li>Improving Castor reliability,</li>
  
<li>Easing the monitoring of bugs, as writing bug reports will be straightforward,</li>
  
<li>Building an archive of fixed bugs,</li>
  
<li>Easing the creation of a test.</li>
</ul></div>
<div class="section">
<h2><a name="Overview_of_the_CTF"></a>Overview of the CTF</h2>
<p>In this section you will be given a quick overview of the CTF: What is the main idea behind it? Where are the tests located? What test suites exist? What are the test patterns? How do you run the tests?</p>
<p>Note: currently the CTF is written to test only Castor XML. A future version could test more or all of Castor functionality.</p></div>
<div class="section">
<h2><a name="Creating_a_JUnit_test_case"></a>Creating a JUnit test case</h2>
<p>Built on top of JUnit, the CTF simply creates test cases to be run under the JUnit  Framework. The main idea is to provide to the CTF the minimal information needed to  build test cases (such as XML Schemas, Castor mapping files, XML documents or some  initialization codes for the java object model used). With this information, the  CTF can then build the tests as much as possible. This means that the developer does  not need to know anything about JUnit to develop a JUnit test for the CTF.</p>
<p>The information necessary for a test case can be located in a JAR file or in a directory  structure. <!-- FIXME: (see section XXX for more details) -->  A directory tree will contain all the  directories and jars, and the CTF will create a global test case with these individual  test cases. The CTF will dynamically build the test cases located in the different jar  files and pass them to JUnit.</p></div>
<div class="section">
<h2><a name="Repository_architecture"></a>Repository architecture</h2>
<p>The code of Castor Testing Framework is located in the following Java packages:</p>

<div class="source">
<div class="source">
<pre>org.exolab.castor.tests.framework
org.exolab.castor.tests.framework.testDescriptor
org.exolab.castor.tests.framework.testDescriptor.types
</pre></div></div>
<p>which can be found under <tt>xmlctf/src/main/java</tt>.</p>
<p>The tests for testing the behavior of Castor and its main features are located in the directory tree starting at <tt>xmlctf/tests/MasterTestSuite</tt>. The tests needed to keep tracks of current reported, unfixed bugs are located in the directory tree starting at <tt>xmlctf/tests/RegressionTestSuite</tt>. The hierarchy of these test suites follows the main modules of Castor:</p>

<div class="source">
<div class="source">
<pre>          MasterTestSuite     / xml / introspection
                                    / mapping
                                    / marshalling
                                    / schema
                                    / sourcegenerator
          RegressionTestSuite / xml / introspection
                                    / mapping
                                    / marshalling
                                    / schema
                                    / sourcegenerator
</pre></div></div></div>
<div class="section">
<h2><a name="CTF_Test_Patterns"></a>CTF Test Patterns</h2>
<p>&#x201c;Testing Castor XML&#x201d; means not only testing the Marshalling Framework but also the mapping framework and the Source Generator. Thus tests fall into one of these three categories and follow several patterns defined in this section. From now on, we will use the term &#x201c;gold file&#x201d; to designate a file that represents an expected result. For most tests, a gold file will be an XML file.</p>
<div class="section">
<h3><a name="CTF_Test_Types"></a>CTF Test Types</h3>
<p>There are four kinds of tests available for use in the CTF:</p>

<ul>
  
<li><b>Schema</b>: Test schema parsing and I/O.</li>
  
<li><b>Marshaling</b>: Test XML document marshaling and unmarshaling to and from  Java classes that you provide for the object model.</li>
  
<li><b>Only Source Generation</b>: Test source generation (only).</li>
  
<li><b>Source Generation</b>: Test XML document marshaling and unmarshaling to  and from Java classes that are created by the Castor source generator.</li>
</ul></div>
<div class="section">
<h3><a name="Schema_Test_Patterns"></a>Schema Test Patterns</h3>
<p>There is only one test pattern for a Schema test. For each schema provided:</p>

<ul>
  
<li>The schema is read from disk and parsed.</li>
  
<li>The parsed schema is optionally written to disk.</li>
  
<li>The parsed schema is written to a new schema object in memory.</li>
  
<li>The new schema object is compared to the original schema object read from disk.</li>
</ul></div>
<div class="section">
<h3><a name="Marshaling_Test_Patterns"></a>Marshaling Test Patterns</h3>
<p>There are three patterns used for a Marshaling test. All patterns marshal and unmarshal XML using Java classes that you provide for the object model. A Marshaling test does not use the Source Generator. A given marshaling test may use any pattern in isolation or all three patterns.</p>
<p>The pattern &#x201c;Marshal/Unmarshal with randomized reference object&#x201d; is used in isolation and is enabled/disabled separately from the other marshaling test patterns. If both other patterns (&#x201c;Marshal/Unmarshal with custom instantiated reference object&#x201d; and &#x201c;Unmarshal/Marshal with reference XML document&#x201d;) are used in the same test, then the object generated by the custom class must be the same as that provided by the input XML document.</p>
<p>How you choose which combination of test patterns will be used is described below.</p>
<p>When testing marshaling, you can optionally also test mapping. Thus, mapping is tested using a Marshaling test.</p>

<div class="source">
<div class="source">
<pre>      &lt;ol&gt;
* 
          Marshal/Unmarshal with custom instantiated reference object
          &lt;ul&gt;
    * 
              Instantiate an object model.  You provide a Java class that will
              instantiate and initialize an object of the correct type for the test.

    * Marshal this object to disk.
    * Compared the marshaled object to a gold file.
    * Unmarshal the document from disk.
    * Compare the unmarshaled object to the original reference object.
          &lt;/ul&gt;

* 
          Marshal/Unmarshal with randomized reference object
          &lt;ul&gt;
    * 
              Instantiate an object model.  The CTF will instantiate an object
              that is populated with random data.

    * Marshal this object to disk.
    * Compared the marshaled object to a gold file.
    * Unmarshal the document from disk.
    * Compare the unmarshaled object to the original random object.
          &lt;/ul&gt;

* 
          Unmarshal/Marshal with reference XML document
          &lt;ul&gt;
    * Unmarshal an XML document from disk, from an input document.
    * 
              Optionally compare this object to one that is instantiated and
              initialized by a custom class that you write.

    * Marshal this object to disk.
    * Compare the newly-marshaled disk file to the input document on disk.
          &lt;/ul&gt;

      &lt;/ol&gt;
    &lt;/section&gt;
    &lt;section title=&quot;Only Source Generation Test Patterns&quot;&gt;

        There is only one test pattern for a test of &lt;b&gt;only&lt;/b&gt; the source
        generation framework.  For source generation, you can optionally provide
        a binding file, but one is not required unless your test requires binding.


        For each schema provided:

      &lt;ul&gt;
* The source generator is configured and executed against the schema.
* The generated source is compiled.
* A class loader is used to load the generated code.
      &lt;/ul&gt;
    &lt;/section&gt;
    &lt;section title=&quot;Source Generation Test Patterns&quot;&gt;

        There is only one test pattern for a Source Generation test.  For source
        generation, you can optionally provide a binding file, but one is not
        required unless your test requires binding.


        For each schema provided:

      &lt;ul&gt;
* The source generator is configured and executed against the schema.
* The generated source is compiled.
* A class loader is used to load the generated code.
* 
          Use the generated code to execute a marshaling test.  The marshaling test
          may use any combination of the following marshaling test patterns as described
          in the section &quot;Marshaling Test Patterns&quot;:
          &lt;ul&gt;
   * Marshal/Unmarshal with custom instantiated reference object
   * Marshal/Unmarshal with randomized reference object
   * Unmarshal/Marshal with reference XML document
          &lt;/ul&gt;

      &lt;/ul&gt;
</pre></div></div></div></div>
<div class="section">
<h2><a name="Life_Cycle_of_a_CTF_Test"></a>Life Cycle of a CTF Test</h2>
<p>The most basic test available in the CTF is the Schema Test. This is just the first step in the life cycle of a CTF test! Depending on whether the source generator is to be used or not, the final step is either the Marshaling test or the Source Generation test, both of which test marshaling and unmarshaling. Source generation can be also tested without marshaling &#x2013; as an intermediate step; ideally a source-generation-only test case will later become a full-fledged Castor test case by having a reference document provided so marshaling and unmarshaling can be tested.</p></div>
<div class="section">
<h2><a name="Building_the_CTF"></a>Building the CTF</h2>
<p>Before trying to launch the test cases, first make sure that the CTF is compiled. You can either use Subversion to check out the current trunk or you can use a source distribution from a release. Castor (and the CTF) is known to build and run under Windows and under Linux &#x2013; and Castor developers regularly test using Java JDK&#x2019;s between 1.3 and 5, inclusive.</p>
<p>Generally speaking, you build and run the CTF from within the &#x201c;<tt>bin</tt>&#x201d; directory of Castor&#x2019;s source tree. Relative to the top of the Castor source, this is the directory <tt>bin</tt>. (Pretty simple!) Just <tt>cd</tt> to that directory and you&#x2019;re ready to go.</p>
<p>Under Windows, you can use a <tt>CMD.EXE</tt> &#x201c;shell&#x201d; window or you can use CygWin. Which shell you use is your preference. Under UNIX, any shell will do. Change directory so the current directory is the Castor bin directory, as described above. Finally, to build the CTF, just run <tt>build.bat tests</tt> or <tt>./build.sh tests</tt>, depending on your operating system. To be thorough, you can run <tt>build.bat clean tests</tt> or <tt>./build.sh clean tests</tt>, which will remove previous build results and start fresh.</p>
<p>Note: While you can build the CTF jar &#x2013; <tt>build.bat CTFjar</tt> or <tt>./build.sh CTFjar</tt> &#x2013; this JAR by default contains only the test framework code and no tests. The JAR is a convenient way of distributing the CTF so that someone can run it without needing access to the full Castor source. However, this document is oriented toward developers who have access to the Castor source tree. Instructions in this document don&#x2019;t refer to and don&#x2019;t use this JAR file.</p></div>
<div class="section">
<h2><a name="Running_the_CTF"></a>Running the CTF</h2>
<p>You can run the tests by using the script <tt>CTFRun.bat</tt> under Windows or <tt>./CTFRun.sh</tt> under Linux/UNIX. If you want to run a specific test or small subset of tests, then you need to provide the path to that Castor Testing Framework test or test tree &#x2013; either the full path to a JAR file or a path to the root directory of a tree of tests. If you want to run the Master Test Suite, you can run the tests without providing any arguments.</p>
<p>The CTF currently requires the Sun JDK (or SDK) to execute, although it may be possible to execute fine with GNU gcj or with JRockit. The CTF will not work if you are using only a JRE. This is because the CTF uses the Sun Java compiler API to compile code as needed for Source Generator and Marshaling Framework tests. The CTF code is written to allow easy extension for additional compiler frameworks, so if you use a compiler or runtime that is not supported, you should be able to easily add support for a new framework. If you want to do this, contact Castor committors for assistance and direction and they&#x2019;ll set you on the right course.</p>
<div class="section">
<h3><a name="Command_line_options"></a>Command line options</h3>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Option </th>
      
<th>Args </th>
      
<th>Description </th>
      
<th>Optional? </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>-verbose </td>
      
<td> </td>
      
<td>Give detailed information on the progress of and execution of each test. </td>
      
<td>Optional </td>
    </tr>
    
<tr class="a">
      
<td>-text </td>
      
<td> </td>
      
<td>Run the tests without using the JUnit GUI. </td>
      
<td>Optional </td>
    </tr>
    
<tr class="b">
      
<td>-printStack</td>
      
<td> </td>
      
<td>If any Exception occurs, dumps its stack. </td>
      
<td>Optional </td>
    </tr>
    
<tr class="a">
      
<td>-seed </td>
      
<td>int </td>
      
<td>Specifies the use of a specific seed for the pseudo-random generator. </td>
      
<td>Optional </td>
    </tr>
  </tbody>
</table>
<p>You can get information about additional command-line options provided by the shell script or batch script by executing (depending on your operating system):</p>

<div class="source">
<div class="source">
<pre>CTFRun.bat help
</pre></div></div>
<p>or </p>

<div class="source">
<div class="source">
<pre>./CTFRun.sh help
</pre></div></div>
<p>Note: The CTF scripts are current written expecting to be executed from the <tt>bin</tt> directory of Castor&#x2019;s source tree. The CTF may not function properly if you run these scripts from another directory.</p>
<p>For instance, to run all the tests from the MasterTestSuite:</p>

<div class="source">
<div class="source">
<pre>CTFRun.bat -verbose ../xmlctf/tests/MasterTestSuite/sourcegenerator
</pre></div></div>
<p>This command will execute in GUI mode (the default mode) all the test cases written in the master test suite for the source generator, and will print detailed messages about the execution of the tests.</p>
<h1>The Test Description: TestDescriptor.xml</h1>
<p>Each CTF test case can be stored in a directory or in a jar and must contain a single <tt>TestDescriptor.xml</tt> file. This file is located under the META-INF directory when using a jar file or directly in the directory that contains the test case files when running the CTF from a directory tree. This file is a summary of the test cases contained in the directory or in the jar file.</p>
<p>Note: the whole XML Schema used to write TestDescriptor.xml is provided in the appendix.</p>
<p>The contents of the Test Descriptor are described and defined below.</p>

<div class="source">
<div class="source">
<pre>  &lt;section title=&quot;Header&quot;&gt;

      Every test descriptor file begins with a common header.

    &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
      &lt;tr&gt;
        &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
        &lt;th&gt;Description&lt;/th&gt;
        &lt;th&gt;Optional?&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Name&lt;/td&gt;
        &lt;td&gt;The name of the test&lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Author&lt;/td&gt;
        &lt;td&gt;The author of the test&lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Comment&lt;/td&gt;
        &lt;td&gt;Some comment on the test.  This element may occur more than once.&lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Category&lt;/td&gt;
        &lt;td&gt;
          The category in which this test falls:
          &lt;ul&gt;
    * basic capability
    * special case
          &lt;/ul&gt;
        &lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;BugFix&lt;/td&gt;
        &lt;td&gt;
          Used to report a bug and keep track of it.  It is defined as follows:
          &lt;ul&gt;
    * Name of the reporter
    * Date of the report
    * 
              Date of the fix (if known) or of the creation of the testcase (otherwise)

    * Comment on the fix (may occur more than once)
          &lt;/ul&gt;
        &lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
</pre></div></div>
<p>For instance, this example test descriptor header</p>

<div class="source">
<div class="source">
<pre>&lt;?xml version='1.0'?&gt;
&lt;TestDescriptor&gt;
    &lt;Name&gt;Bug in the support of foo&lt;/Name&gt;
    &lt;Author&gt;Comprehensive Contributor&lt;/Author&gt;
    &lt;Comment&gt;
        This test case illustrates the bad handling of the foo element in the
        Marshaling Framework
    &lt;/Comment&gt;
    &lt;Comment&gt;Adding this test will prevent further regression in this area.&lt;/Comment&gt;
    &lt;Category&gt;basic capability&lt;/Category&gt;

    &lt;BugFix&gt;
        &lt;Reporter&gt;Desperate User&lt;/Reporter&gt;
        &lt;Date_Report&gt;2001-03-11T12:00:00&lt;/Date_Report&gt;
        &lt;Fixer&gt;Comprehensive Contributor&lt;/Fixer&gt;
        &lt;Date_Fix&gt;2053-12-12T15:03:00&lt;/Date_Fix&gt;
    &lt;/BugFix&gt;

     ...

&lt;/TestDescriptor&gt;
</pre></div></div>
<p>is a valid header for a TestDescriptor file. You may wonder why CTF needs so much information. Actually, this information can be used to generate acceptance documents and is also used to archive and track different resolved bugs. The comment fields especially are present for developers and interested users and are not directly used during the testing process.</p></div></div>
<div class="section">
<h2><a name="The_Test_Following_the_Header"></a>The Test (Following the Header)</h2>
<p>The content of TestDescriptor.xml following the header differs depending on the test type:</p>

<div class="source">
<div class="source">
<pre>    &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
      &lt;tr&gt;
        &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
        &lt;th&gt;Description&lt;/th&gt;
        &lt;th&gt;Optional?&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Name&lt;/td&gt;
        &lt;td&gt;The name of the test&lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Author&lt;/td&gt;
        &lt;td&gt;The author of the test&lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Comment&lt;/td&gt;
        &lt;td&gt;Some comment on the test.  This element may occur more than once.&lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;The test itself&lt;/td&gt;
        &lt;td&gt;
          Exactly one of a SchemaTest, MarshallingTest, OnlySourceGenerationTest,
          or SourceGeneratorTest.
        &lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
</pre></div></div>
<div class="section">
<h3><a name="SchemaTest"></a>SchemaTest</h3>
<p>A SchemaTest tests only that the provided schema(s) can be successfully read and parsed, and then written to disk. No marshaling or unmarshaling or source generation is performed.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Tag </th>
      
<th>Attributes </th>
      
<th>Description </th>
      
<th>Optional? </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>UnitTestCase </td>
      
<td> </td>
      
<td>One or more unit test cases (see below) </td>
      
<td>Required </td>
    </tr>
  </tbody>
</table></div>
<div class="section">
<h3><a name="MarshallingTest"></a>MarshallingTest</h3>
<p>A MarshallingTest will unmarshal the source document, then marshal it to a new file, then unmarshal the new document and compare to the original. No source generation is performed. The Castor marshaling framework is used.</p>
<p>If the root object has the attribute <tt>random</tt>, then additionally a randomized object will be created, marshaled, then unmarshaled, and the unmarshaled object will be compared to the original random object.</p>

<div class="source">
<div class="source">
<pre>      &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
        &lt;tr&gt;
          &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
          &lt;th&gt;Attributes&lt;/th&gt;
          &lt;th&gt;Description&lt;/th&gt;
          &lt;th&gt;Optional?&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Root_Object&lt;/td&gt;
          &lt;td&gt;
            &lt;ul&gt;
      * 
                &lt;i&gt;dump&lt;/i&gt;: a boolean indicating  that dumpFields() method has
                been implemented in Root_Object and that the unmarshaled objects
                should be dumped.

      * 
                &lt;i&gt;random&lt;/i&gt;: a boolean indicating  that randomizeFields() method
                has been implemented in Root_Object and that a randomized object
                should be created, marshaled, and unmarshaled for comparison.

            &lt;/ul&gt;
          &lt;/td&gt;
          &lt;td&gt;The qualified name of the Root object in the generated object model&lt;/td&gt;
          &lt;td&gt;Required&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Configuration&lt;/td&gt;
          &lt;td&gt;&amp;#x00A0;&lt;/td&gt;
          &lt;td&gt;Marshal/Unmarshal configuration (see below)&lt;/td&gt;
          &lt;td&gt;Optional&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;UnitTestCase&lt;/td&gt;
          &lt;td&gt;&amp;#x00A0;&lt;/td&gt;
          &lt;td&gt;One or more unit test cases (see below)&lt;/td&gt;
          &lt;td&gt;Required&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
</pre></div></div></div>
<div class="section">
<h3><a name="OnlySourceGenerationTest"></a>OnlySourceGenerationTest</h3>
<p>An OnlySourceGenerationTest will run the Castor source generator on the schema(s) provided, will compile the generated source, and will load (via a class loader) the compiled source. No marshaling or unmarshaling will be done.</p>

<div class="source">
<div class="source">
<pre>      &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
        &lt;tr&gt;
          &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
          &lt;th&gt;Attributes&lt;/th&gt;
          &lt;th&gt;Description&lt;/th&gt;
          &lt;th&gt;Optional?&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Schema&lt;/td&gt;
          &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
          &lt;td&gt;
            The name of the schema from which we generate sources, may occur more
            than once
          &lt;/td&gt;
          &lt;td&gt;Required&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Property_File&lt;/td&gt;
          &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
          &lt;td&gt;
            The name of the Source Generator property file (often named
            castorbuilder.properties) to use
          &lt;/td&gt;
          &lt;td&gt;Optional&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Collection&lt;/td&gt;
          &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
          &lt;td&gt;
            The collection type to use (usually 'vector' or 'arraylist' or 'odmg');
            if absent, defaults to 'vector'
          &lt;/td&gt;
          &lt;td&gt;Optional&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Binding_File&lt;/td&gt;
          &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
          &lt;td&gt;The name of the binding file (if any)&lt;/td&gt;
          &lt;td&gt;Optional&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;UnitTestCase&lt;/td&gt;
          &lt;td&gt;&amp;#x00A0;&lt;/td&gt;
          &lt;td&gt;One or more unit test cases (see below)&lt;/td&gt;
          &lt;td&gt;Required&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
</pre></div></div></div>
<div class="section">
<h3><a name="SourceGeneratorTest"></a>SourceGeneratorTest</h3>
<p>A SourceGeneratorTest will run the Castor source generator on the schema(s) provided, will compile the generated source, and will load (via a class loader) the compiled source. Once this has been done successfully, the generated source will be used to unmarshal an XML document. The document will then be marshaled to a new file, and then unmarshaled from that file. The newly unmarshaled document will be compared to the original.</p>
<p>If the root object has the attribute <tt>random</tt>, then additionally a randomized object will be created, marshaled, then unmarshaled, and the unmarshaled object will be compared to the original random object.</p>

<div class="source">
<div class="source">
<pre>      &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
        &lt;tr&gt;
          &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
          &lt;th&gt;Attributes&lt;/th&gt;
          &lt;th&gt;Description&lt;/th&gt;
          &lt;th&gt;Optional?&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Schema&lt;/td&gt;
          &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
          &lt;td&gt;
            The name of the schema from which we generate sources, may occur more
            than once
          &lt;/td&gt;
          &lt;td&gt;Required&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Property_File&lt;/td&gt;
          &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
          &lt;td&gt;
            The name of the Source Generator property file (often named
            castorbuilder.properties) to use
          &lt;/td&gt;
          &lt;td&gt;Optional&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Collection&lt;/td&gt;
          &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
          &lt;td&gt;
            The collection type to use (usually 'vector' or 'arraylist' or 'odmg').
            if absent, defaults to 'vector'
          &lt;/td&gt;
          &lt;td&gt;Optional&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Binding_File&lt;/td&gt;
          &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
          &lt;td&gt;The name of the binding file (if any)&lt;/td&gt;
          &lt;td&gt;Optional&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;Root_Object&lt;/td&gt;
          &lt;td&gt;
            &lt;ul&gt;
      * 
                &lt;i&gt;dump&lt;/i&gt;: a boolean indicating  that dumpFields() method has
                been implemented in Root_Object and that the unmarshaled objects
                should be dumped.

      * 
                &lt;i&gt;random&lt;/i&gt;: a boolean indicating  that randomizeFields() method
                has been implemented in Root_Object and that a randomized object
                should be created, marshaled, and unmarshaled for comparison.

            &lt;/ul&gt;
          &lt;/td&gt;
          &lt;td&gt;The qualified name of the Root object in the generated object model&lt;/td&gt;
          &lt;td&gt;Required&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td align=&quot;center&quot;&gt;UnitTestCase&lt;/td&gt;
          &lt;td&gt;&amp;#x00A0;&lt;/td&gt;
          &lt;td&gt;One or more unit test cases (see below)&lt;/td&gt;
          &lt;td&gt;Required&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
</pre></div></div></div></div>
<div class="section">
<h2><a name="UnitTestCase"></a>UnitTestCase</h2>
<p>This is the core of the test, this element provides the input file and output file used for a specific test and the name of the class used to instantiate the Object Model. Once again remember that a TestDescriptor.xml describes a test for a general behavior of Castor which may imply several test cases.</p>

<div class="source">
<div class="source">
<pre>    &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
      &lt;tr&gt;
        &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
        &lt;th&gt;Attributes&lt;/th&gt;
        &lt;th&gt;Description&lt;/th&gt;
        &lt;th&gt;Optional?&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Name&lt;/td&gt;
        &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
        &lt;td&gt;The name of this test.&lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Mapping_File&lt;/td&gt;
        &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
        &lt;td&gt;
          The mapping file for this test, if any.  This element is used only for a
          MarshallingTest, and should be absent for other test types.
        &lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Schema&lt;/td&gt;
        &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
        &lt;td&gt;
          The schema to be used for this test.  This element is used only for a
          SchemaTest, and should be absent for other test types.  You can specify
          only one schema.  Alternately, if the value of this element is &quot;&lt;tt&gt;*&lt;/tt&gt;&quot;
          then all schemas (identified by the extension &lt;tt&gt;.xsd&lt;/tt&gt;) in the
          directory or JAR containing the TestDescriptor.xml will be included.
        &lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Configuration&lt;/td&gt;
        &lt;td&gt;&amp;#x00A0;&lt;/td&gt;
        &lt;td&gt;Configuration for Marshaling or Unmarshaling (see below)&lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Input&lt;/td&gt;
        &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
        &lt;td&gt;
          The name of the input file used to create a specific Object Model by
          unmarshaling this file, used in the &quot;test with reference document&quot; test.
          You need to provide this element for the MarshallingTest and the
          SourceGeneratorTest.  It is not used for the other test types.
        &lt;/td&gt;
        &lt;td&gt;Optional, depending on test type&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;GoldFile&lt;/td&gt;
        &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
        &lt;td&gt;
          The name of the file which can be seen as a &quot;gold file.&quot;  This element is
          used only in a MarshallingTest in the &quot;test with reference document&quot; test
          and is ignored for other test types.  This element is optional for a
          MarshallingTest.  If it is present, then the marshaled reference document
          is compared to the gold file.
        &lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;ObjectBuilder&lt;/td&gt;
        &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
        &lt;td&gt;
          The fully-qualified class name of the class used to instantiate the Object
          Model used.  This can be used in addition to an input document, as a way of
          generating an additional document to compare against.  This element is optional
          for the MarshallingTest or SourceGeneratorTest (if present, used for the &quot;test
          with reference document&quot; test) and is not used for other test types.  If it is
          present, then the named class is instantiated.  Once instantiated, the method
          &lt;tt&gt;buildInstance()&lt;/tt&gt; is invoked.  The object returned is compared against
          the unmarshaled input file.  That is, the ObjectBuilder is used to create a
          reference document.
        &lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Failure&lt;/td&gt;
        &lt;td&gt;
          &lt;ul&gt;
    * 
              &lt;i&gt;exception&lt;/i&gt;: The class name of an exception.  If &lt;tt&gt;Failure&lt;/tt&gt;
              is false, this attribute is ignored.  If &lt;tt&gt;Failure&lt;/tt&gt; is true and
              this optional attribute is present, then the test will succeed only if
              the named Exception is thrown and the test will fail otherwise.  If
              &lt;tt&gt;Failure&lt;/tt&gt; is true and this attribute is absent, then the test will
              succeed if &lt;i&gt;any&lt;/i&gt; Exception is thrown.

          &lt;/ul&gt;
        &lt;/td&gt;
        &lt;td&gt;
          A boolean.  If true, the test will pass if an exception is thrown.  Otherwise,
          the test will fail if an exception is thrown.
        &lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Skip&lt;/td&gt;
        &lt;td align=&quot;center&quot;&gt;None&lt;/td&gt;
        &lt;td&gt;A boolean.  If true, this test will be skipped.&lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Listener&lt;/td&gt;
        &lt;td&gt;&amp;#x00A0;&lt;/td&gt;
        &lt;td&gt;
          A listener for this test (see below).  A Listener is used only for a
          MarshallingTest (it might also work for a SourceGeneratorTest but it has not
          been tested).  A Listener should be absent for other test types.
        &lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
</pre></div></div></div>
<div class="section">
<h2><a name="Listener"></a>Listener</h2>

<div class="source">
<div class="source">
<pre>    &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
       &lt;tr&gt;
         &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
         &lt;th&gt;Description&lt;/th&gt;
         &lt;th&gt;Optional?&lt;/th&gt;
       &lt;/tr&gt;
       &lt;tr&gt;
         &lt;td align=&quot;center&quot;&gt;ClassName&lt;/td&gt;
         &lt;td&gt;The name of the class to use for MarshalListener and/or UnmarshalListener&lt;/td&gt;
         &lt;td&gt;Required&lt;/td&gt;
       &lt;/tr&gt;
       &lt;tr&gt;
         &lt;td align=&quot;center&quot;&gt;Type&lt;/td&gt;
         &lt;td&gt;Marshal, Unmarshal or Both.  Indicate how to use the provided ClassName.&lt;/td&gt;
         &lt;td&gt;Optional, defaults to &quot;Both&quot;.&lt;/td&gt;
       &lt;/tr&gt;
       &lt;tr&gt;
         &lt;td align=&quot;center&quot;&gt;GoldFile&lt;/td&gt;
         &lt;td&gt;The name of the file which can be seen as a 'gold file'&lt;/td&gt;
         &lt;td&gt;Optional&lt;/td&gt;
       &lt;/tr&gt;
     &lt;/table&gt;
</pre></div></div></div>
<div class="section">
<h2><a name="Configuration"></a>Configuration</h2>

<div class="source">
<div class="source">
<pre>    &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
      &lt;tr&gt;
        &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
        &lt;th&gt;Description&lt;/th&gt;
        &lt;th&gt;Optional?&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Marshal&lt;/td&gt;
        &lt;td&gt;If present, the Marshaler will be configured&lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Unmarshal&lt;/td&gt;
        &lt;td&gt;If present, the Unmarshaler will be configured&lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
</pre></div></div></div>
<div class="section">
<h2><a name="Call-Method"></a>Call-Method</h2>

<div class="source">
<div class="source">
<pre>    &lt;table border=&quot;1&quot; cellspacing=&quot;0&quot;&gt;
      &lt;tr&gt;
        &lt;th align=&quot;center&quot;&gt;Tag&lt;/th&gt;
        &lt;th&gt;Attributes&lt;/th&gt;
        &lt;th&gt;Description&lt;/th&gt;
        &lt;th&gt;Optional?&lt;/th&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Call-Method&lt;/td&gt;
        &lt;td&gt;
          &lt;ul&gt;
    * 
              &lt;i&gt;name&lt;/i&gt;: the name of the method to call on the Marshaler
              or Unmarshaler.

          &lt;/ul&gt;
        &lt;/td&gt;
        &lt;td&gt;Root tag for defining a method call&lt;/td&gt;
        &lt;td&gt;Required&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td align=&quot;center&quot;&gt;Value&lt;/td&gt;
        &lt;td&gt;
          &lt;ul&gt;
    * 
              &lt;i&gt;type&lt;/i&gt;: the fully qualified name of the java type
              representing an argument of the method.  For a primitive type,
              use the name of the primitive type.

          &lt;/ul&gt;
        &lt;/td&gt;
        &lt;td&gt;
          The value to be passed in to the method called (this element
          can occur more than once).
        &lt;/td&gt;
        &lt;td&gt;Optional&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
</pre></div></div>
<p>The following code excerpt illustrates how to configure the Marshaler by suppressing all the XSITypes.</p>

<div class="source">
<div class="source">
<pre>&lt;Configuration&gt;
    &lt;Marshal&gt;
        &lt;Call-method name=&quot;setSuppressXSIType&quot;&gt;
            &lt;Value type=&quot;boolean&quot;&gt;true&lt;/Value&gt;
         &lt;/Call-method&gt;
    &lt;/Marshal&gt;
&lt;/Configuration&gt;
</pre></div></div>
<p>Please note that the Configuration element can be present at the MarshallingTestCase level and at the UnitTestCase level. If it is found in both places, the only the UnitTestCase configuration is used.</p></div>
<div class="section">
<h2><a name="Implementing_CastorTestable"></a>Implementing CastorTestable</h2>
<p>As you may have noticed, while testing the SourceGenerator or the Marshaling Framework you have to provide the name of the &#x2018;Root Object&#x2019; of your Object Model. The Root Object represents the mapping of the root element of the XML document.</p>
<p>For instance, given the following XML document:</p>

<div class="source">
<div class="source">
<pre>&lt;?xml version='1.0'?&gt;
&lt;Invoice&gt;
    &lt;Customer&gt;
        ...
    &lt;/Customer&gt;
    &lt;Items&gt;
        ...
    &lt;/Items&gt;
      ...
&lt;/Invoice&gt;]]&gt;
</pre></div></div>
<p>the class that represents the Root Object is <tt>Invoice</tt>.</p>
<p>You provide your own implementation of a Root Object only for a test of the Marshaling framework. For a Source Generation framework test, the appropriate interface is automatically implemented in the generated source. Thus, the discussion below really only applies to a MarshallingTest type of CTF test.</p>
<p>The CTF needs your Root Object to override the equals() method of the <tt>java.lang.Object</tt> class. This is required, not optional, and is used when comparing object models.</p>
<p>While not strictly required, it is highly recommended that the Root Object implement the interface <tt>org.exolab.castor.tests.framework.CastorTestable</tt>. Implementing this interface is simple: implement two methods: <tt>dumpFields()</tt> and <tt>randomizeFields()</tt>. These methods are described below.</p></div>
<div class="section">
<h2><a name="dumpFields"></a>dumpFields</h2>
<p>Here is the JavaDoc of the method as defined in the interface:</p>

<div class="source">
<div class="source">
<pre>    /**
     * Return a recursive dump of the content of the
     * object fields in a user readable format.
     * This is used to retrieve the state of the object if
     * castor fail to marshal the object for any reason.
     *
     * We don't rely on the toString() function as it could have
     * been already implemented with another semantic.
     */
</pre></div></div></div>
<div class="section">
<h2><a name="randomizeFields"></a>randomizeFields</h2>
<p>Here is the JavaDoc of the method as defined in the interface:</p>

<div class="source">
<div class="source">
<pre>    /**
     * The instance of the object will randomize the content
     * of its field. This is used to create an instance
     * of the object model without having to
     * unmarshal anything.
     */
</pre></div></div>
<p>In order to tell the CTF that one (or both) of these methods is implemented you have to set the attributes &#x201c;dump&#x201d; and &#x201c;random&#x201d; to true in the Root_Object element of the test descriptor:</p>

<div class="source">
<div class="source">
<pre>        &lt;Root_Object dump='true' random='true'&gt;Root&lt;/Root_Object&gt;
</pre></div></div>
<p>Note: When using the Source Generator outside the CTF, you can automatically generate classes that implements CastorTestable by using the command line option &#x201c;<tt>-testable</tt>&#x201d;. Within the CTF and the source generator-based tests, this option is automatically provided to the source generation framework.</p></div>
<div class="section">
<h2><a name="Sample_Java_Class_for_a_Root_Object"></a>Sample Java Class for a Root_Object</h2>
<p>The following is an example of a Root Object suitable for use in a MarshallingTest Marshaling framework test.</p>

<div class="source">
<div class="source">
<pre>import java.util.Vector;
import java.util.Enumeration;

// CTF specific
import org.exolab.castor.tests.framework.CastorTestable;

// Provide the necessary methods to randomly create object fields
import org.exolab.castor.tests.framework.RandomHelper;

public class Root implements CastorTestable {
    private String _name;
    private Vector _data;
    public void setName(String name) {
        _name = name;
    }
    public String getName() {
        return _name;
    }
    public void setData(Vector data) {
        _data = data;
    }
    public Vector getData() {
        return _data;
    }

    // --- CastorTestable ------------------------
    public String dumpFields() {
        StringBuffer fields = new StringBuffer();
        fields.append(&quot;name=&quot; + _name + &quot;; data=\n&quot;);
        for (Enumeration e = _data.elements(); e.hasMoreElements(); ) {
            CastorTestable element = (CastorTestable)e.nextElement()
            fields.append(&quot;[&quot; + element.dumpFields() + &quot;]\n&quot;);
        }
        return fields.toString();
    }

    public void randomizeFields() throws InstantiationException,
                                         IllegalAccessException {
        _name = RandomHelper.rndString();
        _data = RandomHelper.rndVector(_data, Data.class);
    }

    /**
     * Note: We should override hashCode() but have not.
     * @param obj
     */
    public boolean equals(java.lang.Object obj) {
        if (this == obj) {
            return true;
        }
        if (obj instanceof Root) {
            Root temp = (Root)obj;
            if (!(this._name.equals(temp._name))) {
                return false;
            }
            if (!(this._data.equals(temp._data))) {
                return false;
            }
            return true;
        }
        return false;
    } //-- boolean equals(java.lang.Object)

} //Root
</pre></div></div></div>
<div class="section">
<h2><a name="Implementing_ObjectModelBuilder"></a>Implementing ObjectModelBuilder</h2>
<p>For a MarshallingTest or a SourceGeneratorTest, in addition to an input document (for unmarshaling), you can also provide an object that will directly and programmatically (not from a file) construct your desired test document. This is a class that will instantiate and correctly populate your test object. This class <i>must</i> implement <tt>equals()</tt>! It will be compared against your unmarshaled input document.</p>
<p>It&#x2019;s recommended that your Object Model Builder also implement the interface CastorTestable, but this is not required.</p>
<div class="section">
<h3><a name="buildInstance"></a>buildInstance</h3>
<p>Here is the JavaDoc of the method declaration in the interface:</p>

<div class="source">
<div class="source">
<pre>    /**
     * Generates and returns a new instance from the hard-coded data.
     *
     * @return a new instance from the hard-coded data
     * @throws Exception if anything goes wrong creating the instance
     */
</pre></div></div></div>
<div class="section">
<h3><a name="Sample_Java_Class_for_an_Object_Builder"></a>Sample Java Class for an Object Builder</h3>
<p>The following is an example of an Object Builder suitable for use in a MarshallingTest or SourceGeneratorTest. The class <tt>Root</tt> used here would be generated for you if you are creating a SourceGeneratorTest, but would be provided by you for a MarshallingTest. This is the Root Object of the test.</p>

<div class="source">
<div class="source">
<pre>import java.util.Vector;

// CTF specific
import org.exolab.castor.tests.framework.ObjectBuilder;

public class Builder implements ObjectBuilder {
    /**
     * Build the expected object model.
     */
    public Object buildInstance() {
        Root r = new Root();
        r.setName(&quot;object name&quot;);
        Vector v = new Vector(3);
        v.add(new Data(&quot;CASTOR-XML&quot;, &quot;good&quot;));
        v.add(new Data(&quot;CASTOR-JDO&quot;, &quot;good&quot;));
        v.add(new Data(&quot;CASTOR-DAX&quot;, &quot;to be improved&quot;));
        r.setData(v);
        return r;
    }
} //Builder
</pre></div></div></div></div>
<div class="section">
<h2><a name="Reporting_a_bug_in_Castor"></a>Reporting a bug in Castor</h2>
<p>With the CTF, reporting a bug should be easier. You should no longer need to find yourself in endless discussion in describing the bug you encounter. All you have to do is:</p>

<ul>
  
<li>Write a simple test case as described previously.</li>
  
<li>Create a jar or a directory tree (which you can ZIP up).</li>
  
<li>Create an issue at <a class="externalLink" href="https://github.com/castor-data-binding/castor/issues">GitHub issues</a> or  to a <a href="contributors.html">contributor</a></li>
</ul></div>
<div class="section">
<h2><a name="Full_Sample_of_a_Source_Generation_Test"></a>Full Sample of a Source Generation Test</h2>
<p>In this section, we demonstrate a complete test case for the Source Generator. The sample test tests the handling of primitives W3C XML Schema type in the Source Generator using the default properties of the Source Generator. This test just illustrates that the Source Generator supports primitives types.</p>
<p>First we have to create the TestDescriptor xml file:</p>
<div class="section">
<h3><a name="TestDescriptor.xml"></a>TestDescriptor.xml</h3>
<p>The test descriptor just describes the test case:</p>

<div class="source">
<div class="source">
<pre>&lt;?xml version='1.0'?&gt;
&lt;TestDescriptor&gt;
    &lt;Name&gt;Test primitive types with default properties&lt;/Name&gt;
    &lt;Comment&gt;
        Test W3C XML Schema primitives type handling in the Source Generator
    &lt;/Comment&gt;
    &lt;Comment&gt;The supported types are:
                            -string
                            -boolean
                            -decimal
                            -float
                            -double
                            -duration
                            -dateTime
                            -time
                            -gYearMonth
                            -gYear
                            -gMonthDay
                            -gDay
                            -gMonth
                            -hexBinary
                            -base64Binary
                            -anyURI
                            -QName
    &lt;/Comment&gt;
    &lt;Comment&gt;
        The facets are not tested in this case and Java primitives are used.
    &lt;/Comment&gt;
    &lt;Comment&gt;hexBinary and base64Binary are not tested.&lt;/Comment&gt;

    &lt;Category&gt;basic capability&lt;/Category&gt;

    &lt;SourceGeneratorTest&gt;
        &lt;Schema&gt;primitives.xsd&lt;/Schema&gt;
        &lt;Root_Object random=&quot;true&quot; dump=&quot;true&quot;&gt;TestPrimitives&lt;/Root_Object&gt;
        &lt;UnitTestCase&gt;
            &lt;Name&gt;Test Generation&lt;/Name&gt;
            &lt;Input&gt;input1.xml&lt;/Input&gt;
        &lt;/UnitTestCase&gt;
        &lt;UnitTestCase&gt;
            &lt;Name&gt;Test Marshalling with the generated Descriptors&lt;/Name&gt;
            &lt;Input&gt;input1.xml&lt;/Input&gt;
            &lt;ObjectBuilder&gt;PrimitivesBuilder&lt;/ObjectBuilder&gt;
        &lt;/UnitTestCase&gt;
        &lt;UnitTestCase&gt;
            &lt;Name&gt;Test the validation&lt;/Name&gt;
            &lt;Input&gt;badinput.xml&lt;/Input&gt;
            &lt;Failure&gt;true&lt;/Failure&gt;
        &lt;/UnitTestCase&gt;
    &lt;/SourceGeneratorTest&gt;
&lt;/TestDescriptor&gt;
</pre></div></div>
<p>Once we have the Test Descriptor, we have to provide the <tt>primitives.xsd</tt> and <tt>input1.xml</tt> and <tt>badinput.xml</tt> files as referenced in the Test Descriptor. We don&#x2019;t need to worry about implementing <tt>CastorTestable</tt> since the SourceGenerator will do so for us: it automatically generates the <tt>dumpFields()</tt> and <tt>randomizeFields()</tt> methods.</p>
<p>Because we want to provide a thorough example, we also want to provide an instance builder, i.e., implementing the ObjectBuilder interface, as referenced in the Test Descriptor.</p></div>
<div class="section">
<h3><a name="The_gold_file"></a>The gold file</h3>

<div class="source">
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;TestPrimitives StringTestAtt=&quot;StringAttribute&quot; booleanTestAtt=&quot;false&quot;
                floatTestAtt=&quot;3.141526&quot; doubleTestAtt=&quot;1.171077&quot;
                decimalTestAtt=&quot;123456789.987654321&quot;
                uriReferenceTestAtt=&quot;http://www.castor.org&quot;
                IDTestAtt=&quot;Castor0.91&quot; QNameTestAtt=&quot;xsd:type&quot;&gt;
    &lt;StringTestEle&gt;StringElement&lt;/StringTestEle&gt;
    &lt;booleanTestEle&gt;true&lt;/booleanTestEle&gt;
    &lt;floatTestEle&gt;1234567899876543210&lt;/floatTestEle&gt;
    &lt;doubleTestEle&gt;0.6385682166079459&lt;/doubleTestEle&gt;
    &lt;decimalTestEle&gt;0.2693678757526658529286578414030373096466064453125&lt;/decimalTestEle&gt;
    &lt;timeDurationTestEle&gt;P1Y2M3DT4H5M6S&lt;/timeDurationTestEle&gt;
    &lt;uriReferenceTestEle&gt;http://castor.exolab.org&lt;/uriReferenceTestEle&gt;
    &lt;IDTestEle&gt;ID9&lt;/IDTestEle&gt;
    &lt;QNameTestEle&gt;Test:test&lt;/QNameTestEle&gt;
&lt;/TestPrimitives&gt;
</pre></div></div></div>
<div class="section">
<h3><a name="PrimitivesBuilder.java"></a>PrimitivesBuilder.java</h3>
<p><tt>PrimitivesBuilder.java</tt> is a simple implementation of ObjectBuilder. It contains the hard-coded values of the input xml file, it is used to create a &#x201c;gold&#x201d; Object Model we can use to compare the Object Model created from the unmarshalling of &#x201c;<tt>input1.xml</tt>.&#x201d;</p>

<div class="source">
<div class="source">
<pre>import java.util.Vector;

//the interface we implement
import org.exolab.castor.tests.framework.ObjectBuilder;

public class PrimitivesBuilder implements ObjectBuilder {
    /**
     * Build the object expected when unmarshalling 'input1.xml'.
     */
    public Object buildInstance() {
        TestPrimitives test = new TestPrimitives();
        test.setStringTestAtt(&quot;StringAttribute&quot;);
        test.setBooleanTestAtt(false);
        test.setFloatTestAtt(3.141526f);
        test.setDoubleTestAtt(1.171077);
        ...
        return test;
    }
}
</pre></div></div></div>
<div class="section">
<h3><a name="Launching_the_Test"></a>Launching the Test</h3>
<p>The last step consists of packaging up the collection of files that make up the test case. You have two choices. You can either create a JAR file containing the test, or you can create a directory structure containing the test. You can use whichever option is easier.</p>
<div class="section">
<h4><a name="Launching_the_Test_from_a_JAR"></a>Launching the Test from a JAR</h4>
<p>Create a JAR from your test&#x2019;s source files:</p>

<div class="source">
<div class="source">
<pre>   jar cvf ../PrimitivesWithoutFacets.jar *.*
</pre></div></div>
<p>You can now execute this test by running the CTF with the path to this JAR file:</p>

<div class="source">
<div class="source">
<pre>   CTFRun -verbose PrimitivesWithoutFacets.jar
</pre></div></div></div>
<div class="section">
<h4><a name="Launching_the_Test_from_a_directory_tree"></a>Launching the Test from a directory tree</h4>
<p>Create a new directory under the appropriate test suite directory tree. For this test, an appropriate directory would be: <tt>xmlctf/tests/MasterTestSuite/sourcegenerator/PrimitivesWithoutFacets</tt>. Copy all of the files that comprise your test into that directory.</p>
<p>You can now execute this test by running the CTF with the path to this directory:</p>

<div class="source">
<div class="source">
<pre>CTFRun -verbose ../xmlctf/tests/MasterTestSuite/sourcegenerator/PrimitivesWithoutFacets
</pre></div></div></div></div></div>
<div class="section">
<h2><a name="Checklist_for_creating_a_CTF_test"></a>Checklist for creating a CTF test</h2>

<ul>
  
<li>Create a directory (the test directory) to put the files needed for the test case.</li>
  
<li>Create the META-INF directory in this directory.</li>
  
<li>Create your TestDescriptor.xml.</li>
  
<li>Write the XML schema, mapping file or XML documents needed and put them under your test directory.</li>
  
<li>If you provide an Object Model don&#x2019;t forget to override the equals() method</li>
  
<li>If necessary, implement the dumpFields() and randomizeFields() methods.</li>
  
<li>Compile the provided object model</li>
  
<li>Create a jar representing the test directory</li>
  
<li>Run the test</li>
</ul></div>
<div class="section">
<h2><a name="Status_of_the_CTF"></a>Status of the CTF</h2>
<p>The current version of the CTF is not perfect and could use some improvements. However, it provides a solid base upon which to test the behavior of Castor. And its presence will help developers to avoid regression while fixing bugs and adding new features.</p>
<p>Future versions of the CTF may include:</p>

<ul>
  
<li>A tool to generate test acceptance documents,</li>
  
<li>An updated architecture for RandomHelper,</li>
  
<li>A way to launch the test from the web site, and</li>
  
<li>Better exception handling and failure tests.</li>
</ul></div>
<div class="section">
<h2><a name="XML_Schema_for_TestDescriptor.xsl"></a>XML Schema for TestDescriptor.xsl</h2>
<p>The full source of the W3C XML schema for the TestDescriptor object is included below. It is found in the source file <tt>TestDescriptor.xml</tt>. Note that this schema is a work in progress and is subject to change.</p>

<div class="source">
<div class="source">
<pre>&lt;?xml version='1.0' encoding=&quot;UTF-8&quot;?&gt;
&lt;!--
    Castor Testing Framework Test Descriptor XML Schema
    Namespace: http://castor.exolab.org/Test

    This schema is used to generate the
    org.exolab.castor.tests.framework.testdescriptor package
    *Note*: This schema is under evolution and subject to change.
     This schema is under the Exolab license
 --&gt;
&lt;!-- $Id$ --&gt;
&lt;xsd:schema xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;
            targetNamespace=&quot;http://castor.exolab.org/Test&quot;
            xmlns:test=&quot;http://castor.exolab.org/Test&quot;
            elementFormDefault=&quot;qualified&quot;&gt;

    &lt;!-- The root element which contains an header and a test element--&gt;
    &lt;xsd:element name=&quot;TestDescriptor&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Castor Testing Framework Test Descriptor XML Schema
                &amp;lt;p&gt;
                Namespace: http://castor.exolab.org/Test
                &amp;lt;p&gt;
                This schema is used to generate the
                org.exolab.castor.tests.framework.testdescriptor package
                *Note*: This schema is under evolution and subject to change.
                 This schema is under the Exolab license.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- The name of the test --&gt;
                &lt;xsd:element name=&quot;Name&quot; type=&quot;xsd:string&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- The author of the tests --&gt;
                &lt;xsd:element name=&quot;Author&quot; type=&quot;xsd:string&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- Some comments for describing the test --&gt;
                &lt;xsd:element name=&quot;Comment&quot; type=&quot;xsd:string&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
                &lt;!-- Define the category of the test --&gt;
                &lt;xsd:element name=&quot;Category&quot; type=&quot;test:CategoryType&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- Is it a bug fix?--&gt;
                &lt;xsd:element ref=&quot;test:BugFix&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- Test for the SourceGenerator OR the Marshaling Framework--&gt;
                &lt;xsd:choice&gt;
                    &lt;!-- Test case for the SourceGenerator --&gt;
                    &lt;xsd:element ref=&quot;test:SourceGeneratorTest&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                    &lt;!-- Test case for the Marshaling Framework --&gt;
                    &lt;xsd:element ref=&quot;test:MarshallingTest&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                    &lt;!-- Test case for the Schema Object Model --&gt;
                    &lt;xsd:element ref=&quot;test:SchemaTest&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                    &lt;!-- Test case for Source Generation ONLY (no marshaling or unmarshaling) --&gt;
                    &lt;xsd:element ref=&quot;test:OnlySourceGenerationTest&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;/xsd:choice&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;BugFix&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Encapsulates information about a bug fix, including the reporter's
                name (or Email address), the date of the report and of the fix,
                and one or more comments about the bug.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- the reporter name or EMail address--&gt;
                &lt;xsd:element name=&quot;Reporter&quot; type=&quot;xsd:string&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- date of the report--&gt;
                &lt;xsd:element name=&quot;Date_Report&quot; type=&quot;xsd:date&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- date of the fix--&gt;
                &lt;xsd:element name=&quot;Date_Fix&quot; type=&quot;xsd:date&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- Some comments on the fix or the bug --&gt;
                &lt;xsd:element name=&quot;Comment&quot; type=&quot;xsd:string&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;SourceGeneratorTest&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Tests source generation and then tests the generated source, testing
                both marshaling and unmarshaling.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- the names of the schema files to generate sources from--&gt;
                &lt;!-- assume that the Testing Framework will try to match the name --&gt;
                &lt;!-- by looking in all the JARs - directories --&gt;
                &lt;xsd:element name=&quot;Schema&quot; type=&quot;xsd:string&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
                &lt;!-- The name of the properties file used with this SourceGenerator test case--&gt;
                &lt;xsd:element name=&quot;Property_File&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- The name of the collection type used with this SourceGenerator test case--&gt;
                &lt;xsd:element ref=&quot;test:Collection&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- the binding file name --&gt;
                &lt;xsd:element name=&quot;BindingFile&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- the qualified name of the root Object --&gt;
                &lt;!-- later: define a pattern to describe a Java quailified name--&gt;
                &lt;xsd:element ref=&quot;test:Root_Object&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- individual test cases --&gt;
                &lt;xsd:element ref=&quot;test:UnitTestCase&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;MarshallingTest&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Test marshaling.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- the qualified name of the root Object --&gt;
                &lt;!-- later: define a pattern to describe a Java quailified name--&gt;
                &lt;xsd:element ref=&quot;test:Root_Object&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- the configuration for the marshaling framework --&gt;
                &lt;xsd:element ref=&quot;test:Configuration&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- individual test cases --&gt;
                &lt;xsd:element ref=&quot;test:UnitTestCase&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;SchemaTest&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Tests a schema.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- individual test cases --&gt;
                &lt;xsd:element ref=&quot;test:UnitTestCase&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;OnlySourceGenerationTest&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Tests source generation only, and does not attempt to use the generated code.  While
                a &lt;code&gt;SourceGeneratorTest&lt;/code&gt; is better because it is more thorough, sometimes
                the only thing that requires testing is the code generation.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- the names of the schema files to generate sources from--&gt;
                &lt;!-- assume that the Testing Framework will try to match the name --&gt;
                &lt;!-- by looking in all the JARs - directories --&gt;
                &lt;xsd:element name=&quot;Schema&quot; type=&quot;xsd:string&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
                &lt;!-- The name of the properties file used with this SourceGenerator test case--&gt;
                &lt;xsd:element name=&quot;Property_File&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- The name of the collection type used with this SourceGenerator test case--&gt;
                &lt;xsd:element ref=&quot;test:Collection&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- the binding file name --&gt;
                &lt;xsd:element name=&quot;BindingFile&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- individual test cases --&gt;
                &lt;xsd:element ref=&quot;test:UnitTestCase&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;Root_Object&quot; type=&quot;test:RootType&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                The qualified name of the root Object.
                TODO: define a pattern to describe a Java quailified name.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;Collection&quot; default=&quot;vector&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                The data type to use in collections.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
           &lt;xsd:simpleType&gt;
            &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;
                &lt;xsd:enumeration value=&quot;vector&quot;/&gt;
                &lt;xsd:enumeration value=&quot;arraylist&quot;/&gt;
                  &lt;xsd:enumeration value=&quot;odmg&quot;/&gt;
            &lt;/xsd:restriction&gt;
        &lt;/xsd:simpleType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;UnitTestCase&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A definition of a single Unit Test testcase.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;!-- The name of the test --&gt;
                &lt;xsd:element name=&quot;Name&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;xsd:choice minOccurs=&quot;0&quot;&gt;
                    &lt;!-- the mapping file used (if any) --&gt;
                    &lt;xsd:element name=&quot;Mapping_File&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                    &lt;!-- the name of the schema to read/write --&gt;
                    &lt;!-- a '*' will indicate that the CTF will try to read/write --&gt;
                    &lt;!-- all the schemas present in the directory or jar --&gt;
                    &lt;xsd:element name=&quot;Schema&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;/xsd:choice&gt;
                &lt;!-- the configuration for the marshalling framework --&gt;
                &lt;xsd:element ref=&quot;test:Configuration&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- the input XML file for unmarshaling --&gt;
                &lt;xsd:element name=&quot;Input&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- the file to compared a marshaled document to --&gt;
                &lt;xsd:element name=&quot;GoldFile&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- the ObjectBuilder class used for this test case --&gt;
                &lt;xsd:element name=&quot;ObjectBuilder&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- a boolean that indicates if the test case intents to fail (Exception thrown)--&gt;
                &lt;xsd:element name=&quot;Failure&quot; type=&quot;test:FailureType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- will cause the test to be ignored --&gt;
                &lt;xsd:element name=&quot;Skip&quot;   type=&quot;xsd:boolean&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- the listener to use for unmarshaling, marshaling or both --&gt;
                &lt;xsd:element name=&quot;Listener&quot; type=&quot;test:ListenerType&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;1&quot;/&gt;
                &lt;!-- for a schema test, the number of differences expected --&gt;
                &lt;xsd:element name=&quot;SchemaDifferences&quot; type=&quot;test:SchemaDifferencesType&quot;
                             minOccurs=&quot;0&quot; maxOccurs=&quot;2&quot;/&gt;
                &lt;!-- Some comments for describing the test --&gt;
                &lt;xsd:element name=&quot;Comment&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;/xsd:sequence&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;Configuration&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
           &lt;xsd:choice&gt;
              &lt;xsd:element name=&quot;Marshal&quot; type=&quot;test:ConfigurationType&quot;/&gt;
              &lt;xsd:element name=&quot;Unmarshal&quot; type=&quot;test:ConfigurationType&quot;/&gt;
           &lt;/xsd:choice&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:complexType name=&quot;ConfigurationType&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                Configuration for marshaling or unmarshaling or source generation.  Contains
                a list of methods to be called on the marshaler or unmarshaler or source
                generator with the parameters to be provided for each method.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:sequence&gt;
           &lt;xsd:element ref=&quot;test:Call-method&quot; maxOccurs=&quot;unbounded&quot;/&gt;
        &lt;/xsd:sequence&gt;
    &lt;/xsd:complexType&gt;

    &lt;xsd:element name=&quot;Call-method&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A single method to call on a marshaler or unmarshaler or source generator
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:sequence&gt;
                &lt;xsd:element ref=&quot;test:Value&quot; maxOccurs=&quot;unbounded&quot;/&gt;
            &lt;/xsd:sequence&gt;
            &lt;!-- the name of the method to call --&gt;
            &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot;/&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:element name=&quot;Value&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A parameter to be provided to a method.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexType&gt;
            &lt;xsd:simpleContent&gt;
                &lt;xsd:extension base=&quot;xsd:string&quot;&gt;
                    &lt;!-- java type --&gt;
                    &lt;xsd:attribute name=&quot;type&quot; type=&quot;xsd:string&quot; required=&quot;true&quot;/&gt;
                &lt;/xsd:extension&gt;
            &lt;/xsd:simpleContent&gt;
        &lt;/xsd:complexType&gt;
    &lt;/xsd:element&gt;

    &lt;xsd:simpleType name=&quot;CategoryType&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                The type of test case, either basic capability or a special case.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;
            &lt;xsd:enumeration value=&quot;basic capability&quot;/&gt;
            &lt;xsd:enumeration value=&quot;special case&quot;/&gt;
            &lt;!-- Extensible--&gt;
        &lt;/xsd:restriction&gt;
    &lt;/xsd:simpleType&gt;

    &lt;!--A root object in an object model--&gt;
    &lt;xsd:complexType name=&quot;RootType&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                The definition of the Root Type in the object model.  Contains two
                boolean attributes:  &lt;code&gt;random&lt;/code&gt; and &lt;code&gt;dump&lt;/code&gt;.
                If random is set to true, a test using randomized objects will
                be executed.  If dump is set to true, the object will be dumped
                to specific files.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:complexContent&gt;
            &lt;xsd:extension base=&quot;test:StringType&quot;&gt;
                &lt;!--set to true to randomly generate the given Object Model--&gt;
                &lt;xsd:attribute name=&quot;random&quot; type=&quot;xsd:boolean&quot; default=&quot;false&quot;/&gt;
                &lt;!--set to true to dump the given Object Model states in specific files--&gt;
                &lt;xsd:attribute name=&quot;dump&quot;   type=&quot;xsd:boolean&quot; default=&quot;false&quot;/&gt;
            &lt;/xsd:extension&gt;
        &lt;/xsd:complexContent&gt;
    &lt;/xsd:complexType&gt;

    &lt;xsd:complexType name=&quot;StringType&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                A Java String.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:simpleContent&gt;
            &lt;xsd:extension base=&quot;xsd:string&quot;/&gt;
        &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;

    &lt;!-- The failure type --&gt;
    &lt;xsd:complexType name=&quot;FailureType&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                True if this test is expected to throw an Exception and if it would thus
                be an error if the test does not throw an Exception.  False otherwise.
                &amp;lt;p&gt;
                If FailureType is true, then this element optionally contains the attribute
                &lt;code&gt;exception&lt;/code&gt; that contains the class of the Exception that is
                expected.  If this attribute is not provided, then the presence of any
                exception causes the test to pass.  Otherwise, the specific exception
                has to be thrown for the test to pass.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:simpleContent&gt;
            &lt;xsd:extension base=&quot;xsd:boolean&quot;&gt;
                &lt;!-- if you expect a specific exception, you can specify it here --&gt;
                &lt;xsd:attribute name=&quot;exception&quot; type=&quot;xsd:string&quot; use=&quot;optional&quot;/&gt;
                &lt;!-- if you expect the failure at a specific step, specify which step --&gt;
                &lt;xsd:attribute name=&quot;FailureStep&quot; type=&quot;test:FailureStepType&quot; use=&quot;optional&quot;/&gt;
            &lt;/xsd:extension&gt;
        &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;

    &lt;!-- The failure type --&gt;
    &lt;xsd:complexType name=&quot;SchemaDifferencesType&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
                If you expect a non-zero number of differences when comparing schemas,
                add one of these elements and provide the FailureStep attribute
                to say which step this difference applies to.
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:simpleContent&gt;
            &lt;xsd:extension base=&quot;xsd:int&quot;&gt;
                &lt;xsd:attribute name=&quot;FailureStep&quot; type=&quot;test:FailureStepType&quot; use=&quot;required&quot;/&gt;
            &lt;/xsd:extension&gt;
        &lt;/xsd:simpleContent&gt;
    &lt;/xsd:complexType&gt;

    &lt;xsd:simpleType name=&quot;FailureStepType&quot;&gt;
       &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;
           &lt;xsd:enumeration value=&quot;parse-schema&quot;/&gt;
           &lt;xsd:enumeration value=&quot;write-schema&quot;/&gt;
           &lt;xsd:enumeration value=&quot;compare-schema&quot;/&gt;
           &lt;xsd:enumeration value=&quot;source-generation&quot;/&gt;
           &lt;xsd:enumeration value=&quot;source-compilation&quot;/&gt;
           &lt;xsd:enumeration value=&quot;load-generated-classes&quot;/&gt;
           &lt;xsd:enumeration value=&quot;unmarshal-reference&quot;/&gt;
           &lt;xsd:enumeration value=&quot;marshal-to-disk&quot;/&gt;
           &lt;xsd:enumeration value=&quot;compare-to-reference&quot;/&gt;
           &lt;xsd:enumeration value=&quot;second-compare&quot;/&gt;
           &lt;xsd:enumeration value=&quot;listener-comparison&quot;/&gt;
           &lt;xsd:enumeration value=&quot;second-unmarshal&quot;/&gt;
       &lt;/xsd:restriction&gt;
    &lt;/xsd:simpleType&gt;

    &lt;!-- Marshal/Unmarshal Listener type --&gt;
    &lt;xsd:complexType name=&quot;ListenerType&quot;&gt;
        &lt;xsd:annotation&gt;
            &lt;xsd:documentation&gt;
            &lt;/xsd:documentation&gt;
        &lt;/xsd:annotation&gt;
        &lt;xsd:sequence&gt;
            &lt;xsd:element name=&quot;GoldFile&quot; type=&quot;xsd:string&quot; maxOccurs=&quot;1&quot;/&gt;
            &lt;!-- the fully qualified name for the listener --&gt;
            &lt;xsd:element name=&quot;ClassName&quot; type=&quot;xsd:string&quot; minOccurs=&quot;1&quot; maxOccurs=&quot;1&quot;/&gt;
            &lt;!-- The type of listener: Marshal, Unmarshal or Both --&gt;
            &lt;xsd:element name=&quot;Type&quot; maxOccurs=&quot;1&quot; default=&quot;Both&quot;&gt;
                &lt;xsd:simpleType&gt;
                    &lt;xsd:restriction base=&quot;xsd:string&quot;&gt;
                        &lt;xsd:enumeration value=&quot;Marshal&quot;/&gt;
                        &lt;xsd:enumeration value=&quot;Unmarshal&quot;/&gt;
                        &lt;xsd:enumeration value=&quot;Both&quot;/&gt;
                    &lt;/xsd:restriction&gt;
                &lt;/xsd:simpleType&gt;
            &lt;/xsd:element&gt;
        &lt;/xsd:sequence&gt;
    &lt;/xsd:complexType&gt;

&lt;/xsd:schema&gt;
</pre></div></div></div>
<div class="section">
<h2><a name="References"></a>References</h2>
<p>| Seven Steps to Test Automation Success (Version from June 2001) | Bret Pettichord | (<a class="externalLink" href="http://www.io.com/~wazmo/papers/seven_steps.html">http://www.io.com/~wazmo/papers/seven_steps.html</a>) | JUnit Framework | | | <a class="externalLink" href="http://www.junit.org">JUnit</a> |</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2015.
          All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
